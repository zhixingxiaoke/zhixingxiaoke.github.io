---
title: RFC9293 TCP åè®®
weight: 3
draft: true
# bookFlatSection: false
# bookToc: true
# bookHidden: false
# bookCollapseSection: false
# bookComments: false
# bookSearchExclude: false
---

# RFC9293 TCP åè®®ä¸­æ–‡ç¿»è¯‘

è¿™æ˜¯ RFC ä¸Šæœ€æ–°ï¼ˆæˆªæ­¢åˆ° 2023 å¹´ 3 æœˆï¼‰å®Œæ•´æè¿°äº† TCP åè®®æ ‡å‡†çš„æ–‡æ¡£ï¼Œå®ƒæ•´åˆäº† RFC793 æå‡ºçš„ TCP è§„èŒƒä»¥åŠåæ¥æå‡ºçš„å¤šé¡¹ä¼˜åŒ– ï¼Œå¦‚æœå¯¹ RFC793 æ„Ÿå…´è¶£å¯ä»¥å‚è€ƒ[RFC793 TCP åè®®ä¸­æ–‡ç¿»è¯‘](../translations/rfc793)ã€‚

åŸæ–‡ï¼š[Transmission Control Protocol (TCP)](https://datatracker.ietf.org/doc/rfc9293/)

## å°é¢

Internet Engineering Task Force (IETF)  
STD: 7  
Request for Comments: 9293  
Obsoletes: 793, 879, 2873, 6093, 6429, 6528, 6691  
Updates: 1011, 1122, 5961  
Category: Standards Track  
ISSN: 2070-1721

{{< right >}}
W. Eddy, Ed.  
MTI Systems  
August 2022
{{< /right >}}

{{< center >}}
Transmission Control Protocol (TCP)  
ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰
{{< /center >}}

## æ‘˜è¦

**Abstract**

This document specifies the Transmission Control Protocol (TCP).  
æœ¬æ–‡æ¡£è§„å®šäº†ä¼ è¾“æ§åˆ¶åè®®ï¼ˆTCPï¼‰ã€‚

TCP is an important transport-layer protocol in the Internet protocol stack, and it has continuously evolved over decades of use and growth of the Internet.  
TCP æ˜¯ Internet åè®®æ ˆä¸­é‡è¦çš„ä¼ è¾“å±‚åè®®ï¼Œåœ¨äº’è”ç½‘æ•°åå¹´çš„ä½¿ç”¨å’Œå‘å±•è¿‡ç¨‹ä¸­ä¸æ–­æ”¹è¿›ã€‚

Over this time, a number of changes have been made to TCP as it was specified in RFC 793, though these have only been documented in a piecemeal fashion.  
åœ¨è¿™æ®µæ—¶é—´é‡Œï¼Œå·²ç»å¯¹ RFC 793 ä¸­è§„å®šçš„ TCP è¿›è¡Œäº†ä¸€äº›ä¿®æ”¹ï¼Œå°½ç®¡è¿™äº›ä¿®æ”¹åªæ˜¯ä»¥é›¶æ•£çš„æ–¹å¼è¢«è®°å½•ä¸‹æ¥ã€‚

This document collects and brings those changes together with the protocol specification from RFC 793.  
æœ¬æ–‡ä»¶æ”¶é›†äº†è¿™äº›å˜åŒ–ï¼Œå¹¶å°†å…¶ä¸ RFC 793 çš„åè®®è§„èŒƒç»“åˆåœ¨ä¸€èµ·ã€‚

This document obsoletes RFC 793, as well as RFCs 879, 2873, 6093, 6429, 6528, and 6691 that updated parts of RFC 793.  
æœ¬æ–‡æ¡£åºŸå¼ƒäº† RFC 793ï¼Œä»¥åŠæ›´æ–°äº† RFC 793 éƒ¨åˆ†å†…å®¹çš„ RFC 879ã€2873ã€6093ã€6429ã€6528 å’Œ 6691ã€‚

It updates RFCs 1011 and 1122, and it should be considered as a replacement for the portions of those documents dealing with TCP requirements.  
å®ƒæ›´æ–°äº† RFC 1011 å’Œ 1122ï¼Œå®ƒå¯ä»¥è¢«è§†ä¸ºé‚£äº›æ–‡æ¡£ä¸­æ¶‰åŠ TCP è¦æ±‚çš„éƒ¨åˆ†çš„æ›¿ä»£å“ã€‚

It also updates RFC 5961 by adding a small clarification in reset handling while in the SYN-RECEIVED state.  
å®ƒè¿˜æ›´æ–°äº† RFC 5961ï¼Œåœ¨ SYN-RECEIVED çŠ¶æ€ä¸‹åœ¨é‡ç½®å¤„ç†ä¸­æ·»åŠ äº†ä¸€ä¸ªå°çš„è¯´æ˜ã€‚

The TCP header control bits from RFC 793 have also been updated based on RFC 3168.  
RFC 793 ä¸­çš„ TCP å¤´æ§åˆ¶ä½ä¹Ÿæ ¹æ® RFC 3168 è¿›è¡Œäº†æ›´æ–°ã€‚

**Status of This Memo**

This is an Internet Standards Track document.  
è¿™æ˜¯ä¸€ä»½äº’è”ç½‘æ ‡å‡†è¿½è¸ªæ–‡ä»¶ã€‚

This document is a product of the Internet Engineering Task Force (IETF).  
æœ¬æ–‡æ¡£æ˜¯ Internet å·¥ç¨‹ä»»åŠ¡ç»„ (IETF) çš„äº§å“ã€‚

It represents the consensus of the IETF community.  
å®ƒä»£è¡¨äº† IETF ç¤¾åŒºçš„å…±è¯†ã€‚

It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG).  
å®ƒå·²ç»æ¥å—äº†å…¬ä¼—å®¡é˜…ï¼Œå¹¶å·²è¢«äº’è”ç½‘å·¥ç¨‹æŒ‡å¯¼å°ç»„ (IESG) æ‰¹å‡†å‘å¸ƒã€‚

Further information on Internet Standards is available in Section 2 of RFC 7841.  
æœ‰å…³ Internet æ ‡å‡†çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜… RFC 7841 çš„ç¬¬ 2 èŠ‚ã€‚

Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at https://www.rfc-editor.org/info/rfc9293.  
æœ‰å…³æœ¬æ–‡æ¡£çš„å½“å‰çŠ¶æ€ã€ä»»ä½•å‹˜è¯¯è¡¨ä»¥åŠå¦‚ä½•æä¾›åé¦ˆçš„ä¿¡æ¯ï¼Œè¯·è®¿é—® [ğŸ”—](https://www.rfc-editor.org/info/rfc9293)ã€‚

## ç‰ˆæƒå£°æ˜

**Copyright Notice**

Copyright (c) 2022 IETF Trust and the persons identified as the document authors.  
Copyright (c) 2022 IETF Trust å’Œè¢«è®¤å®šä¸ºæœ¬æ–‡æ¡£ä½œè€…çš„äººå‘˜ã€‚

All rights reserved.  
ä¿ç•™æ‰€æœ‰æƒåˆ©ã€‚

This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  
æœ¬æ–‡æ¡£å— BCP 78 å’Œ IETF ä¿¡æ‰˜ä¸ IETF æ–‡æ¡£ç›¸å…³çš„æ³•å¾‹è§„å®š [ğŸ”—](https://trustee.ietf.org/license-info) çš„çº¦æŸï¼Œè¿™äº›æ¡æ¬¾åœ¨æœ¬æ–‡æ¡£å‘å¸ƒä¹‹æ—¥ç”Ÿæ•ˆã€‚

Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  
è¯·ä»”ç»†é˜…è¯»è¿™äº›æ–‡ä»¶ï¼Œå› ä¸ºå®ƒä»¬æè¿°äº†æ‚¨å¯¹æœ¬æ–‡ä»¶çš„æƒåˆ©å’Œé™åˆ¶ã€‚

Code Components extracted from this document must include Revised BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Revised BSD License.  
ä»æœ¬æ–‡ä»¶ä¸­æå–çš„ä»£ç ç»„ä»¶å¿…é¡»åŒ…æ‹¬ä¿¡æ‰˜æ³•å¾‹æ¡æ¬¾ç¬¬ 4.e èŠ‚ä¸­æè¿°çš„ä¿®è®¢ç‰ˆ BSD è®¸å¯æ–‡æœ¬ï¼Œå¹¶ä¸”ä¸æä¾›ä¿®è®¢ç‰ˆ BSD è®¸å¯ä¸­æè¿°çš„ä¿è¯ã€‚

This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  
æœ¬æ–‡æ¡£å¯èƒ½åŒ…å« 2008 å¹´ 11 æœˆ 10 æ—¥ä¹‹å‰å‘å¸ƒæˆ–å…¬å¼€æä¾›çš„ IETF æ–‡æ¡£æˆ– IETF æ–‡ç¨¿ä¸­çš„ææ–™ã€‚

The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process.  
æ§åˆ¶æœ¬ææ–™æŸäº›ç‰ˆæƒçš„äººå¯èƒ½æœªæˆäºˆ IETF ä¿¡æ‰˜å…è®¸åœ¨ IETF æ ‡å‡†æµç¨‹ä¹‹å¤–ä¿®æ”¹æ­¤ç±»ææ–™çš„æƒåˆ©ã€‚

Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.  
å¦‚æœæ²¡æœ‰ä»æ§åˆ¶æ­¤ç±»ææ–™çš„ç‰ˆæƒçš„äººé‚£é‡Œè·å¾—è¶³å¤Ÿçš„è®¸å¯ï¼Œåˆ™ä¸å¾—åœ¨ IETF æ ‡å‡†æµç¨‹ä¹‹å¤–ä¿®æ”¹æœ¬æ–‡æ¡£ï¼Œå¹¶ä¸”ä¸å¾—åœ¨ IETF æ ‡å‡†æµç¨‹ä¹‹å¤–åˆ›å»ºå…¶è¡ç”Ÿä½œå“ï¼Œé™¤éå°†å…¶æ ¼å¼åŒ–ä¸º RFC å‡ºç‰ˆæˆ–å°†å…¶ç¿»è¯‘æˆè‹±è¯­ä»¥å¤–çš„å…¶ä»–è¯­è¨€ã€‚

## ç›®å½•

{{< center >}}
Table of Contents
{{< /center >}}

1.Purpose and Scope ç›®çš„å’ŒèŒƒå›´

2.Introduction ä»‹ç»  
&emsp;2.1. Requirements Language éœ€æ±‚è¯­è¨€  
&emsp;2.2. Key TCP Concepts å…³é”®çš„ TCP æ¦‚å¿µ

3.Functional Specification åŠŸèƒ½è§„èŒƒ  
&emsp;3.1. Header Format å¤´éƒ¨æ ¼å¼  
&emsp;3.2. Specific Option Definitions å…·ä½“é€‰é¡¹å®šä¹‰  
&emsp;&emsp;3.2.1. Other Common Options å…¶ä»–å¸¸ç”¨é€‰é¡¹  
&emsp;&emsp;3.2.2. Experimental TCP Options å®éªŒæ€§ TCP é€‰é¡¹  
&emsp;3.3. TCP Terminology Overview TCP æœ¯è¯­æ¦‚è¿°  
&emsp;&emsp;3.3.1. Key Connection State Variables å…³é”®è¿æ¥çŠ¶æ€å˜é‡  
&emsp;&emsp;3.3.2. State Machine Overview çŠ¶æ€æœºæ¦‚è¿°  
&emsp;3.4. Sequence Numbers åºåˆ—å·  
&emsp;&emsp;3.4.1. Initial Sequence Number Selection åˆå§‹åºåˆ—å·é€‰æ‹©  
&emsp;&emsp;3.4.2. Knowing When to Keep Quiet çŸ¥é“ä»€ä¹ˆæ—¶å€™è¯¥ä¿æŒé™é»˜  
&emsp;&emsp;3.4.3. The TCP Quiet Time Concept TCP é™é»˜æ—¶é—´æ¦‚å¿µ  
&emsp;3.5. Establishing a Connection å»ºç«‹è¿æ¥  
&emsp;&emsp;3.5.1. Half-Open Connections and Other Anomalies åŠå¼€è¿æ¥å’Œå…¶ä»–å¼‚å¸¸  
&emsp;&emsp;3.5.2. Reset Generation é‡ç½®ç”Ÿæˆ  
&emsp;&emsp;3.5.3. Reset Processing é‡ç½®å¤„ç†  
&emsp;3.6. Closing a Connection å…³é—­è¿æ¥  
&emsp;&emsp;3.6.1. Half-Closed Connections åŠé—­è¿æ¥  
&emsp;3.7. Segmentation åˆ†æ®µ  
&emsp;&emsp;3.7.1. Maximum Segment Size Option æœ€å¤§æ®µé•¿åº¦é€‰é¡¹  
&emsp;&emsp;3.7.2. Path MTU Discovery è·¯å¾„ MTU å‘ç°  
&emsp;&emsp;3.7.3. Interfaces with Variable MTU Values å¯å˜ MTU å€¼çš„æ¥å£  
&emsp;&emsp;3.7.4. Nagle Algorithm Nagle ç®—æ³•  
&emsp;&emsp;3.7.5. IPv6 Jumbograms  
&emsp;3.8. Data Communication æ•°æ®é€šä¿¡  
&emsp;&emsp;3.8.1. Retransmission Timeout é‡ä¼ è¶…æ—¶  
&emsp;&emsp;3.8.2. TCP Congestion Control TCP æ‹¥å¡æ§åˆ¶  
&emsp;&emsp;3.8.3. TCP Connection Failures TCP è¿æ¥æ•…éšœ  
&emsp;&emsp;3.8.4. TCP Keep-Alives  
&emsp;&emsp;3.8.5. The Communication of Urgent Information ç´§æ€¥ä¿¡æ¯çš„é€šä¿¡  
&emsp;&emsp;3.8.6. Managing the Window ç®¡ç†çª—å£  
&emsp;3.9. Interfaces æ¥å£  
&emsp;&emsp;3.9.1. User/TCP Interface ç”¨æˆ·/TCP æ¥å£  
&emsp;&emsp;3.9.2. TCP/Lower-Level Interface TCP/ä¸‹å±‚åè®®æ¥å£  
&emsp;3.10. Event Processing äº‹ä»¶å¤„ç†  
&emsp;&emsp;3.10.1. OPEN Call OPEN è°ƒç”¨  
&emsp;&emsp;3.10.2. SEND Call SEND è°ƒç”¨  
&emsp;&emsp;3.10.3. RECEIVE Call RECEIVE è°ƒç”¨  
&emsp;&emsp;3.10.4. CLOSE Call CLOSE è°ƒç”¨  
&emsp;&emsp;3.10.5. ABORT Call ABORT è°ƒç”¨  
&emsp;&emsp;3.10.6. STATUS Call STATUS è°ƒç”¨  
&emsp;&emsp;3.10.7. SEGMENT ARRIVES æ”¶åˆ°æ®µ  
&emsp;&emsp;3.10.8. Timeouts è¶…æ—¶

4.Glossary è¯æ±‡è¡¨

5.Changes from RFC 793 ä¸ RFC 793 ç›¸æ¯”çš„æ”¹åŠ¨

6.IANA Considerations IANA çš„æ³¨æ„äº‹é¡¹

7.Security and Privacy Considerations å®‰å…¨å’Œéšç§æ³¨æ„äº‹é¡¹

8.References å‚è€ƒæ–‡çŒ®  
&emsp;8.1. Normative References è§„èŒƒæ€§å‚è€ƒæ–‡çŒ®  
&emsp;8.2. Informative References éè§„èŒƒæ€§å‚è€ƒæ–‡çŒ®

Appendix A. Other Implementation Notes å…¶ä»–å®ç°è¯´æ˜  
&emsp;A.1. IP Security Compartment and Precedence IP å®‰å…¨éƒ¨åˆ†å’Œä¼˜å…ˆçº§  
&emsp;&emsp;A.1.1. Precedence ä¼˜å…ˆçº§  
&emsp;&emsp;A.1.2. MLS Systems MLS ç³»ç»Ÿ  
&emsp;A.2. Sequence Number Validation åºåˆ—å·éªŒè¯  
&emsp;A.3. Nagle Modification Nagle ä¿®æ”¹  
&emsp;A.4. Low Watermark Settings ä½æ°´å°è®¾ç½®

Appendix B. TCP Requirement Summary TCP è¦æ±‚æ¦‚è¿°

Acknowledgments è‡´è°¢

Author's Address ä½œè€…çš„åœ°å€

## ç›®çš„å’ŒèŒƒå›´

**1.Purpose and Scope**

In 1981, RFC 793 [16] was released, documenting the Transmission Control Protocol (TCP) and replacing earlier published specifications for TCP.  
1981 å¹´ï¼ŒRFC 793 [16] å‘å¸ƒï¼Œè®°å½•äº†ä¼ è¾“æ§åˆ¶åè®® (TCP) å¹¶å–ä»£äº†æ—©æœŸå‘å¸ƒçš„ TCP è§„èŒƒã€‚

Since then, TCP has been widely implemented, and it has been used as a transport protocol for numerous applications on the Internet.  
ä»é‚£æ—¶èµ·ï¼ŒTCP å¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ï¼Œå¹¶è¢«ç”¨ä½œ Internet ä¸Šä¼—å¤šåº”ç”¨ç¨‹åºçš„ä¼ è¾“åè®®ã€‚

For several decades, RFC 793 plus a number of other documents have combined to serve as the core specification for TCP [49].  
å‡ åå¹´æ¥ï¼ŒRFC 793 åŠ ä¸Šè®¸å¤šå…¶ä»–æ–‡æ¡£å·²åˆå¹¶ä¸º TCP çš„æ ¸å¿ƒè§„èŒƒ[49]ã€‚

Over time, a number of errata have been filed against RFC 793.  
éšç€æ—¶é—´çš„æµé€ï¼Œå·²ç»é’ˆå¯¹ RFC 793 æå‡ºäº†è®¸å¤šå‹˜è¯¯è¡¨ã€‚

There have also been deficiencies found and resolved in security, performance, and many other aspects.  
åœ¨å®‰å…¨ã€æ€§èƒ½å’Œå…¶ä»–è®¸å¤šæ–¹é¢ä¹Ÿå‘ç°å’Œè§£å†³äº†ä¸€äº›ç¼ºé™·ã€‚

The number of enhancements has grown over time across many separate documents.  
éšç€æ—¶é—´çš„æ¨ç§»ï¼Œæ”¹è¿›çš„æ•°é‡åœ¨è®¸å¤šç‹¬ç«‹çš„æ–‡ä»¶ä¸­ä¸æ–­å¢åŠ ã€‚

These were never accumulated together into a comprehensive update to the base specification.  
è¿™äº›æ”¹è¿›è¿˜æ²¡æœ‰è¢«æ•´åˆåˆ°ä¸€èµ·ï¼Œæ•´ä½“æ›´æ–°åŸºæœ¬è§„èŒƒã€‚

The purpose of this document is to bring together all of the IETF Standards Track changes and other clarifications that have been made to the base TCP functional specification (RFC 793) and to unify them into an updated version of the specification.  
æœ¬æ–‡æ¡£çš„ç›®çš„æ˜¯å°†æ‰€æœ‰ IETF æ ‡å‡†è½¨é“çš„ä¿®æ”¹å’Œå…¶ä»–å¯¹åŸºç¡€ TCP åŠŸèƒ½è§„èŒƒï¼ˆRFC 793ï¼‰çš„è¯´æ˜æ±‡é›†åœ¨ä¸€èµ·ï¼Œå¹¶å°†å®ƒä»¬ç»Ÿä¸€åˆ°è§„èŒƒçš„æ›´æ–°ç‰ˆæœ¬ä¸­ã€‚

Some companion documents are referenced for important algorithms that are used by TCP (e.g., for congestion control) but have not been completely included in this document.  
ä½†æ˜¯ä¸€äº›ç”¨äº TCP ä½¿ç”¨çš„é‡è¦ç®—æ³•ï¼ˆä¾‹å¦‚ï¼Œç”¨äºæ‹¥å¡æ§åˆ¶ï¼‰çš„ç›¸å…³æ–‡æ¡£ï¼Œè¿˜æ²¡æœ‰å®Œå…¨åŒ…æ‹¬åœ¨æœ¬æ–‡æ¡£ä¸­ã€‚

This is a conscious choice, as this base specification can be used with multiple additional algorithms that are developed and incorporated separately.  
è¿™æ˜¯ä¸€ä¸ªæœ‰æ„è¯†çš„é€‰æ‹©ï¼Œå› ä¸ºè¯¥åŸºæœ¬è§„èŒƒå¯ä»¥ä¸å¤šç§é¢å¤–çš„ç®—æ³•ä¸€èµ·ä½¿ç”¨ï¼Œè¿™äº›ç®—æ³•æ˜¯å•ç‹¬å¼€å‘å’Œåˆå¹¶çš„ã€‚

This document focuses on the common basis that all TCP implementations must support in order to interoperate.  
æœ¬æ–‡æ¡£é‡ç‚¹å…³æ³¨æ‰€æœ‰ TCP å®ç°å¿…é¡»æ”¯æŒçš„å…±åŒåŸºç¡€ï¼Œä»¥å®ç°äº’æ“ä½œã€‚

Since some additional TCP features have become quite complicated themselves (e.g., advanced loss recovery and congestion control), future companion documents may attempt to similarly bring these together.  
å› ä¸ºä¸€äº›é¢å¤–çš„ TCP åŠŸèƒ½æœ¬èº«å·²ç»å˜å¾—ç›¸å½“å¤æ‚ï¼ˆä¾‹å¦‚ï¼Œé«˜çº§æŸå¤±æ¢å¤å’Œæ‹¥å¡æ§åˆ¶ï¼‰ï¼Œæœªæ¥çš„é…å¥—æ–‡æ¡£å¯èƒ½ä¼šè¯•å›¾ç±»ä¼¼åœ°å°†è¿™äº›åŠŸèƒ½é›†ä¸­èµ·æ¥ã€‚

In addition to the protocol specification that describes the TCP segment format, generation, and processing rules that are to be implemented in code, RFC 793 and other updates also contain informative and descriptive text for readers to understand aspects of the protocol design and operation.  
é™¤äº†æè¿°è¦åœ¨ä»£ç ä¸­å®ç°çš„ TCP æ®µæ ¼å¼ã€ç”Ÿæˆå’Œå¤„ç†è§„åˆ™çš„åè®®è§„èŒƒå¤–ï¼ŒRFC 793 å’Œå…¶ä»–æ›´æ–°è¿˜åŒ…å«ä¿¡æ¯å’Œæè¿°æ€§å†…å®¹ï¼Œä»¥ä¾¿è¯»è€…äº†è§£åè®®è®¾è®¡å’Œè¿è¡Œçš„å„ä¸ªæ–¹é¢ã€‚

This document does not attempt to alter or update this informative text and is focused only on updating the normative protocol specification.  
æœ¬æ–‡ä»¶å¹¶ä¸è¯•å›¾æ”¹å˜æˆ–æ›´æ–°è¿™äº›ä¿¡æ¯æ€§çš„å†…å®¹ï¼Œè€Œåªæ˜¯ä¸“æ³¨äºæ›´æ–°æ ‡å‡†åŒ–çš„åè®®è§„èŒƒã€‚

This document preserves references to the documentation containing the important explanations and rationale, where appropriate.  
æœ¬æ–‡æ¡£ä¿ç•™äº†å¯¹åŒ…å«é‡è¦è§£é‡Šå’ŒåŸºæœ¬åŸç†çš„æ–‡æ¡£çš„å¼•ç”¨ã€‚

This document is intended to be useful both in checking existing TCP implementations for conformance purposes, as well as in writing new implementations.  
è¯¥æ–‡æ¡£æ—¨åœ¨å¸®åŠ©æ£€æŸ¥ç°æœ‰çš„ TCP å®ç°ä»¥åŠç¼–å†™æ–°å®ç°ã€‚

## ä»‹ç»

**2.Introduction**

RFC 793 contains a discussion of the TCP design goals and provides examples of its operation, including examples of connection establishment, connection termination, and packet retransmission to repair losses.  
RFC 793 åŒ…å«äº†å¯¹ TCP è®¾è®¡ç›®æ ‡çš„è®¨è®ºï¼Œå¹¶æä¾›äº†å…¶æ“ä½œçš„ç¤ºä¾‹ï¼ŒåŒ…æ‹¬å»ºç«‹è¿æ¥ã€å…³é—­è¿æ¥ä»¥åŠå¼¥è¡¥ä¸¢å¤±çš„æ•°æ®åŒ…é‡ä¼ ã€‚

This document describes the basic functionality expected in modern TCP implementations and replaces the protocol specification in RFC 793.  
æœ¬æ–‡æ¡£æè¿°äº†ç°ä»£ TCP å®ç°ä¸­é¢„æœŸçš„åŸºæœ¬åŠŸèƒ½ï¼Œå¹¶æ›¿æ¢äº† RFC 793 ä¸­çš„åè®®è§„èŒƒã€‚

It does not replicate or attempt to update the introduction and philosophy content in Sections 1 and 2 of RFC 793.  
å®ƒä¸ä¼šå¤åˆ¶æˆ–å°è¯•æ›´æ–° RFC 793 ç¬¬ 1 å’Œ 2 èŠ‚ä¸­çš„ç®€ä»‹å’Œç†å¿µå†…å®¹ã€‚

Other documents are referenced to provide explanations of the theory of operation, rationale, and detailed discussion of design decisions.  
è¿˜å‚è€ƒäº†å…¶ä»–æ–‡ä»¶ï¼Œä»¥æä¾›å¯¹æ“ä½œç†è®ºã€åŸç†çš„è§£é‡Šï¼Œä»¥åŠå¯¹è®¾è®¡å†³ç­–çš„è¯¦ç»†è®¨è®ºã€‚

This document only focuses on the normative behavior of the protocol.  
æœ¬æ–‡æ¡£åªå…³æ³¨åè®®çš„æ ‡å‡†è¡Œä¸ºã€‚

The "TCP Roadmap" [49] provides a more extensive guide to the RFCs that define TCP and describe various important algorithms.
"TCP è·¯çº¿å›¾" [49] ä¸ºå®šä¹‰ TCP å’Œæè¿°å„ç§é‡è¦ç®—æ³•çš„ RFC æä¾›äº†æ›´å¹¿æ³›çš„æŒ‡å—ã€‚

The TCP Roadmap contains sections on strongly encouraged enhancements that improve performance and other aspects of TCP beyond the basic operation specified in this document.  
TCP è·¯çº¿å›¾åŒ…å«å¼ºçƒˆæ¨èçš„å¢å¼ºåŠŸèƒ½ï¼Œè¿™äº›å¢å¼ºåŠŸèƒ½å¯ä»¥æé«˜ TCP çš„æ€§èƒ½å’Œå…¶ä»–è¶…å‡ºæœ¬æ–‡æ¡£ä¸­è§„å®šçš„åŸºæœ¬æ“ä½œçš„æ–¹é¢ã€‚

As one example, implementing congestion control (e.g., [8]) is a TCP requirement, but it is a complex topic on its own and not described in detail in this document, as there are many options and possibilities that do not impact basic interoperability.  
ä¸¾ä¸ªä¾‹å­ï¼Œå®ç°æ‹¥å¡æ§åˆ¶ï¼ˆä¾‹å¦‚ï¼Œ[8]ï¼‰æ˜¯ä¸€é¡¹ TCP è¦æ±‚ï¼Œä½†å®ƒæœ¬èº«å°±æ˜¯ä¸€ä¸ªå¤æ‚çš„ä¸»é¢˜ï¼Œå¹¶ä¸”åœ¨æœ¬æ–‡æ¡£ä¸­æ²¡æœ‰è¯¦ç»†æè¿°ï¼Œå› ä¸ºæœ‰è®¸å¤šä¸ä¼šå½±å“åŸºæœ¬çš„äº’æ“ä½œæ€§çš„é€‰é¡¹å’Œå¯èƒ½æ€§ .

Similarly, most TCP implementations today include the high-performance extensions in [47], but these are not strictly required or discussed in this document.  
ç±»ä¼¼åœ°ï¼Œä»Šå¤©çš„å¤§å¤šæ•° TCP å®ç°éƒ½åŒ…æ‹¬ [47] ä¸­çš„é«˜æ€§èƒ½æ‰©å±•ï¼Œä½†è¿™äº›åœ¨æœ¬æ–‡æ¡£ä¸­å¹¶ä¸æ˜¯ä¸¥æ ¼è¦æ±‚æˆ–è®¨è®ºçš„ã€‚

Multipath considerations for TCP are also specified separately in [59].  
TCP çš„å¤šè·¯å¾„æ³¨æ„äº‹é¡¹ä¹Ÿåœ¨ [59] ä¸­å•ç‹¬æŒ‡å®šã€‚

A list of changes from RFC 793 is contained in Section 5.  
ä¸ RFC 793 ç›¸æ¯”çš„æ”¹åŠ¨æ¸…å•åŒ…å«åœ¨ç¬¬ 5 èŠ‚ã€‚

### éœ€æ±‚è¯­è¨€

**2.1. Requirements Language**

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 [3] [12] when, and only when, they appear in all capitals, as shown here.  
æœ¬æ–‡ä¸­çš„å…³é”®è¯ "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", å’Œ "OPTIONAL"ï¼Œå½“ä¸”ä»…å½“å®ƒä»¬ä»¥å¤§å†™å­—æ¯å‡ºç°æ—¶ï¼Œåº”æŒ‰ç…§ BCP 14 [3] [12] ä¸­çš„æè¿°è¿›è¡Œè§£é‡Šï¼Œå¦‚è¿™é‡Œæ‰€ç¤ºã€‚

Each use of RFC 2119 keywords in the document is individually labeled and referenced in Appendix B, which summarizes implementation requirements.  
æ–‡æ¡£ä¸­æ¯æ¬¡ä½¿ç”¨ RFC 2119 å…³é”®å­—éƒ½åœ¨é™„å½• B ä¸­å•ç‹¬æ ‡è®°å’Œå¼•ç”¨ï¼Œé™„å½• B æ€»ç»“äº†å®ç°è¦æ±‚ã€‚

Sentences using "MUST" are labeled as "MUST-X" with X being a numeric identifier enabling the requirement to be located easily when referenced from Appendix B.  
ä½¿ç”¨ "MUST" çš„å¥å­è¢«æ ‡è®°ä¸º "MUST-X"ï¼ŒX æ˜¯ä¸€ä¸ªæ•°å­—æ ‡è¯†ç¬¦ï¼Œå¯ä»¥å¾ˆå®¹æ˜“åœ°ä»é™„å½• B æ‰¾åˆ°å¼•ç”¨çš„è¦æ±‚ã€‚

Similarly, sentences using "SHOULD" are labeled with "SHLD-X", "MAY" with "MAY-X", and "RECOMMENDED" with "REC-X".  
åŒæ ·åœ°ï¼Œä½¿ç”¨ "SHOULD" çš„å¥å­è¢«æ ‡è®°ä¸º "SHLD-X"ï¼Œ"MAY" è¢«æ ‡è®°ä¸º "MAY-X"ï¼Œ"RECOMMENDED" è¢«æ ‡è®°ä¸º "REC-X"ã€‚

For the purposes of this labeling, "SHOULD NOT" and "MUST NOT" are labeled the same as "SHOULD" and "MUST" instances.  
å‡ºäºæ­¤æ ‡ç­¾çš„ç›®çš„ï¼Œ"SHOULD NOT" å’Œ "MUST NOT" çš„æ ‡ç­¾ä¸ "SHOULD" å’Œ "MUST" å®ä¾‹çš„æ ‡ç­¾ç›¸åŒã€‚

### å…³é”®çš„ TCP æ¦‚å¿µ

**2.2. Key TCP Concepts**

TCP provides a reliable, in-order, byte-stream service to applications.  
TCP ä¸ºåº”ç”¨ç¨‹åºæä¾›å¯é ã€æœ‰åºçš„å­—èŠ‚æµæœåŠ¡ã€‚

The application byte-stream is conveyed over the network via TCP segments, with each TCP segment sent as an Internet Protocol (IP) datagram.  
åº”ç”¨ç¨‹åºçš„å­—èŠ‚æµé€šè¿‡ TCP æ®µåœ¨ç½‘ç»œä¸Šä¼ è¾“ï¼Œæ¯ä¸ª TCP æ®µä½œä¸ºäº’è”ç½‘åè®® (IP) æ•°æ®æŠ¥å‘é€ã€‚

TCP reliability consists of detecting packet losses (via sequence numbers) and errors (via per-segment checksums), as well as correction via retransmission.  
TCP å¯é æ€§åŒ…æ‹¬æ£€æµ‹æ•°æ®åŒ…ä¸¢å¤±ï¼ˆé€šè¿‡åºåˆ—å·ï¼‰å’Œé”™è¯¯ï¼ˆé€šè¿‡æ®µæ ¡éªŒå’Œï¼‰ï¼Œä»¥åŠé€šè¿‡é‡ä¼ è¿›è¡Œçº æ­£ã€‚

TCP supports unicast delivery of data.  
TCP æ”¯æŒå•æ’­ä¼ è¾“æ•°æ®ã€‚

There are anycast applications that can successfully use TCP without modifications, though there is some risk of instability due to changes of lower-layer forwarding behavior [46].  
æœ‰ä¸€äº›ä»»æ’­åº”ç”¨ç¨‹åºå¯ä»¥åœ¨ä¸ä¿®æ”¹çš„æƒ…å†µä¸‹æˆåŠŸåœ°ä½¿ç”¨ TCPï¼Œå°½ç®¡ç”±äºä¸‹å±‚è½¬å‘è¡Œä¸ºçš„å˜åŒ–å­˜åœ¨ä¸€äº›ä¸ç¨³å®šçš„é£é™© [46]ã€‚

TCP is connection oriented, though it does not inherently include a liveness detection capability.  
TCP æ˜¯é¢å‘è¿æ¥çš„ï¼Œå°½ç®¡å®ƒæœ¬èº«å¹¶ä¸åŒ…æ‹¬æ´»è·ƒæ€§æ£€æµ‹åŠŸèƒ½ã€‚

Data flow is supported bidirectionally over TCP connections, though applications are free to send data only unidirectionally, if they so choose.  
é€šè¿‡ TCP è¿æ¥åŒå‘æ”¯æŒæ•°æ®æµï¼Œä½†å¦‚æœåº”ç”¨ç¨‹åºæ„¿æ„ï¼Œå®ƒä»¬å¯ä»¥è‡ªç”±åœ°ä»…å•å‘å‘é€æ•°æ®ã€‚

TCP uses port numbers to identify application services and to multiplex distinct flows between hosts.  
TCP ä½¿ç”¨ç«¯å£å·æ¥è¯†åˆ«åº”ç”¨ç¨‹åºæœåŠ¡å¹¶åœ¨ä¸»æœºä¹‹é—´å¤ç”¨ä¸åŒçš„æµã€‚

A more detailed description of TCP features compared to other transport protocols can be found in Section 3.1 of [52].  
ä¸å…¶ä»–ä¼ è¾“åè®®ç›¸æ¯”ï¼ŒTCP åŠŸèƒ½çš„æ›´è¯¦ç»†æè¿°å¯ä»¥åœ¨ [52] çš„ç¬¬ 3.1 èŠ‚ä¸­æ‰¾åˆ°ã€‚

Further description of the motivations for developing TCP and its role in the Internet protocol stack can be found in Section 2 of [16] and earlier versions of the TCP specification.  
å…³äºå¼€å‘ TCP çš„åŠ¨æœºå’Œå®ƒåœ¨äº’è”ç½‘åè®®æ ˆä¸­çš„ä½œç”¨çš„æ›´å¤šæè¿°ï¼Œå¯ä»¥åœ¨[16]çš„ç¬¬ 2 èŠ‚å’Œæ—©æœŸç‰ˆæœ¬çš„ TCP è§„èŒƒä¸­æ‰¾åˆ°ã€‚

## åŠŸèƒ½è§„èŒƒ

**3.Functional Specification**

### å¤´éƒ¨æ ¼å¼

**3.1. Header Format**

TCP segments are sent as internet datagrams.  
TCP æ®µä½œä¸ºç½‘ç»œæ•°æ®æŠ¥å‘é€ã€‚

The Internet Protocol (IP) header carries several information fields, including the source and destination host addresses [1] [13].
ç½‘é™…äº’è”åè®® (IP) æŠ¥å¤´æºå¸¦å¤šä¸ªä¿¡æ¯å­—æ®µï¼ŒåŒ…æ‹¬æºå’Œç›®æ ‡ä¸»æœºåœ°å€ [1] [13]ã€‚

A TCP header follows the IP headers, supplying information specific to TCP.  
TCP å¤´éƒ¨è·Ÿåœ¨ IP å¤´éƒ¨ä¹‹åï¼Œæä¾›ç‰¹å®šäº TCP çš„ä¿¡æ¯ã€‚

This division allows for the existence of host-level protocols other than TCP.  
è¿™ç§åˆ’åˆ†å…è®¸å­˜åœ¨é™¤ TCP ä¹‹å¤–çš„ä¸»æœºçº§åè®®ã€‚

In the early development of the Internet suite of protocols, the IP header fields had been a part of TCP.  
åœ¨ Internet åè®®å¥—ä»¶çš„æ—©æœŸå¼€å‘ä¸­ï¼ŒIP æŠ¥å¤´å­—æ®µä¸€ç›´æ˜¯ TCP çš„ä¸€éƒ¨åˆ†ã€‚

This document describes TCP, which uses TCP headers.  
æœ¬æ–‡æ¡£æè¿°äº†ä½¿ç”¨ TCP å¤´éƒ¨çš„ TCPã€‚

A TCP header, followed by any user data in the segment, is formatted as follows, using the style from [66]:  
åœ¨æ®µä¸­ï¼ŒTCP å¤´éƒ¨åé¢æ˜¯ä»»æ„ç”¨æˆ·æ•°æ®ï¼Œæ ¼å¼å¦‚ä¸‹ï¼Œä½¿ç”¨ [66] ä¸­çš„æ ·å¼ï¼š

{{< center >}}

```
 0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          Source Port          |       Destination Port        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Sequence Number                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Acknowledgment Number                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Data |       |C|E|U|A|P|R|S|F|                               |
   | Offset| Rsrvd |W|C|R|C|S|S|Y|I|            Window             |
   |       |       |R|E|G|K|H|T|N|N|                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Checksum            |         Urgent Pointer        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                           [Options]                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               :
   :                             Data                              :
   :                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

Note that one tick mark represents one bit position.  
æ³¨æ„ï¼šä¸€ä¸ªåˆ»åº¦çº¿ä»£è¡¨ä¸€ä¸ªæ¯”ç‰¹ä½ã€‚

Figure 1: TCP Header Format  
å›¾ 1ï¼šTCP å¤´éƒ¨æ ¼å¼

{{< /center >}}

where:  
å…¶ä¸­ï¼š

**Source Port**: 16 bits  
{{< block-indent >}}
The source port number.  
æºç«¯å£å·
{{< /block-indent >}}

**Destination Port**: 16 bits  
{{< block-indent >}}
The destination port number.  
ç›®æ ‡ç«¯å£å·
{{< /block-indent >}}

**Sequence Number**: 32 bits  
{{< block-indent >}}
The sequence number of the first data octet in this segment (except when SYN is present).  
è¯¥æ®µæ•°æ®ä¸­ç¬¬ä¸€ä¸ªå­—èŠ‚çš„åºåˆ—å·ï¼ˆæœ‰ SYN æ ‡å¿—é™¤å¤–ï¼‰ã€‚  
If SYN is set, the sequence number is the initial sequence number (ISN) and the first data octet is ISN+1.  
å¦‚æœè®¾ç½®äº† SYNï¼Œåˆ™åºåˆ—å·æ˜¯åˆå§‹åºåˆ—å· (ISN)ï¼Œç¬¬ä¸€ä¸ªå­—èŠ‚æ•°æ®æ˜¯ ISN+1ã€‚
{{< /block-indent >}}

**Acknowledgment Number**: 32 bits
{{< block-indent >}}
If the ACK control bit is set, this field contains the value of the next sequence number the sender of the segment is expecting to receive. Once a connection is established, this is always sent.  
å¦‚æœè®¾ç½®äº† ACK æ ‡å¿—ï¼Œè¿™ä¸ªå­—æ®µè¡¨ç¤ºå‘é€è€…æœŸæœ›æ”¶åˆ°çš„ä¸‹ä¸€ä¸ªåºåˆ—å·çš„å€¼ã€‚ä¸€æ—¦å»ºç«‹äº†è¿æ¥ï¼Œä¸€ç›´ä¼šå‘é€è¿™ä¸ªå­—æ®µã€‚
{{< /block-indent >}}

**Data Offset (DOffset)**: 4 bits  
{{< block-indent >}}  
The number of 32 bit words in the TCP Header. This indicates where the data begins. The TCP header (even one including options) is an integer multiple of 32 bits long.  
è¿™ä¸ªæ•°è¡¨ç¤º TCP å¤´éƒ¨çš„é•¿åº¦æœ‰å¤šå°‘ä¸ª 32 bitï¼Œè¡¨ç¤ºçœŸæ­£æ•°æ®å¼€å§‹çš„ä½ç½®ã€‚TCP å¤´éƒ¨ï¼ˆå³ä½¿åŒ…æ‹¬é€‰é¡¹éƒ¨åˆ†ï¼‰çš„é•¿åº¦æ˜¯ 32 bit çš„æ•´æ•°å€ã€‚
{{< /block-indent >}}

**Reserved (Rsrvd)**: 4 bits  
{{< block-indent >}}
A set of control bits reserved for future use. Must be zero in generated segments and must be ignored in received segments if the corresponding future features are not implemented by the sending or receiving host.  
ä¸ºå°†æ¥ä½¿ç”¨è€Œä¿ç•™çš„ä¸€ç»„æ§åˆ¶ä½ã€‚å¦‚æœå‘é€æˆ–æ¥æ”¶ä¸»æœºæœªå®ç°ç›¸åº”çš„æœªæ¥åŠŸèƒ½ï¼Œåˆ™åœ¨ç”Ÿæˆçš„æ®µä¸­å¿…é¡»ä¸ºé›¶ï¼Œå¹¶ä¸”åœ¨æ¥æ”¶çš„æ®µä¸­å¿…é¡»å¿½ç•¥ã€‚
{{< /block-indent >}}

**Control bits**:  
{{< block-indent >}}
The control bits are also known as "flags".  
æ§åˆ¶ä½ä¹Ÿç§°ä¸º "æ ‡å¿—"ã€‚

Assignment is managed by IANA from the "TCP Header Flags" registry [62].  
ç”± IANA ä» "TCP Header Flags" æ³¨å†Œè¡¨ [62] ä¸­ç®¡ç†åˆ†é…ã€‚

The currently assigned control bits are CWR, ECE, URG, ACK, PSH, RST, SYN, and FIN.  
ç›®å‰åˆ†é…çš„æ§åˆ¶ä½æ˜¯ CWRã€ECEã€URGã€ACKã€PSHã€RSTã€SYN å’Œ FINã€‚

CWR: 1 bit

Congestion Window Reduced (see [6]).  
å‡å°‘æ‹¥å¡çª—å£ï¼ˆå‚è§ [6]ï¼‰ã€‚

ECE: 1 bit

ECN-Echo (see [6]).  
æ˜¾å¼æ‹¥å¡é€šçŸ¥å›åº”(å‚è§ [6]).

URG: 1 bit

Urgent pointer field is significant.  
ç´§æ€¥æŒ‡é’ˆå­—æ®µå¾ˆé‡è¦ã€‚

ACK: 1 bit

Acknowledgment field is significant.  
ç¡®è®¤å­—æ®µå¾ˆé‡è¦ã€‚

PSH: 1 bit

Push function (see the Send Call description in Section 3.9.1).  
æ¨é€åŠŸèƒ½ï¼ˆå‚è§ç¬¬ 3.9.1 èŠ‚ä¸­çš„ Send è°ƒç”¨è¯´æ˜ï¼‰ã€‚

RST: 1 bit

Reset the connection.  
é‡ç½®è¿æ¥ã€‚

SYN: 1 bit

Synchronize sequence numbers.  
åŒæ­¥åºåˆ—å·ã€‚

FIN: 1 bit

No more data from sender.  
å‘é€è€…æ²¡æœ‰æ›´å¤šæ•°æ®ã€‚

{{< /block-indent >}}

**Window**: 16 bits
{{< block-indent >}}
The number of data octets beginning with the one indicated in the acknowledgment field which the sender of this segment is willing to accept.  
ä»ç¡®è®¤åºå·å¼€å§‹ï¼Œå‘é€æ–¹å¯ä»¥æ¥æ”¶çš„å­—èŠ‚æ•°ã€‚

The value is shifted when the window scaling extension is used [47].  
å½“ä½¿ç”¨çª—å£ç¼©æ”¾æ‰©å±•æ—¶ï¼Œè¯¥å€¼ä¼šå‘ç”Ÿå˜åŒ– [47]ã€‚

The window size MUST be treated as an unsigned number, or else large window sizes will appear like negative windows and TCP will not work (MUST-1).  
çª—å£å¤§å°å¿…é¡»è¢«è§†ä¸ºæ— ç¬¦å·çš„æ•°å­—ï¼Œå¦åˆ™å¤§çš„çª—å£å¤§å°å°†å‡ºç°è´Ÿçª—å£ï¼ŒTCP å°†æ— æ³•å·¥ä½œï¼ˆMUST-1ï¼‰ã€‚

It is RECOMMENDED that implementations will reserve 32-bit fields for the send and receive window sizes in the connection record and do all window computations with 32 bits (REC-1).  
å»ºè®®å®ç°åœ¨è¿æ¥è®°å½•ä¸­ä¸ºå‘é€å’Œæ¥æ”¶çª—å£å¤§å°ä¿ç•™ 32 ä½å­—æ®µï¼Œå¹¶ä»¥ 32 ä½è¿›è¡Œæ‰€æœ‰çª—å£è®¡ç®—ï¼ˆREC-1ï¼‰ã€‚
{{< /block-indent >}}

**Checksum**: 16 bits  
{{< block-indent >}}
The checksum field is the 16 bit one's complement of the one's complement sum of all 16 bit words in the header and text.  
æ£€éªŒå’Œæ˜¯å¤´éƒ¨å’Œæ•°æ®éƒ¨åˆ†æ‰€æœ‰åˆ†å‰²æˆ 16 bit æ•°çš„ç»è¿‡äºŒè¿›åˆ¶åç æ±‚å’Œå¾—åˆ°çš„æ•°ã€‚

The checksum computation needs to ensure the 16-bit alignment of the data being summed.  
æ ¡éªŒå’Œè®¡ç®—éœ€è¦ç¡®ä¿æ±‚å’Œçš„æ•°æ® 16 ä½å¯¹é½ã€‚

If a segment contains an odd number of header and text octets, alignment can be achieved by padding the last octet with zeros on its right to form a 16-bit word for checksum purposes.  
å¦‚æœæ®µçš„å¤´éƒ¨å’Œå†…å®¹æ˜¯å¥‡æ•°ä¸ªå­—èŠ‚ï¼Œå¯ä»¥é€šè¿‡åœ¨æœ€åä¸€ä¸ªå­—èŠ‚çš„å³ä¾§å¡«å……é›¶æ¥å¯¹é½ï¼Œä»¥ç»„æˆä¸€ä¸ª 16 ä½å­—æ¥å®ç°æ ¡éªŒå’Œã€‚

The pad is not transmitted as part of the segment.  
å¡«å……ä¸ä¼šä½œä¸º TCP æ®µçš„ä¸€éƒ¨åˆ†è¿›è¡Œä¼ è¾“ã€‚

While computing the checksum, the checksum field itself is replaced with zeros.  
åœ¨è®¡ç®—æ ¡éªŒå’Œæ—¶ï¼Œæ ¡éªŒå’Œå­—æ®µæœ¬èº«ç”¨é›¶æ›¿æ¢ã€‚

The checksum also covers a pseudo-header (Figure 2) conceptually prefixed to the TCP header.  
æ ¡éªŒå’Œè¿˜åŒ…æ‹¬äº†ä¸€ä¸ªä¼ªå¤´éƒ¨ï¼ˆå›¾ 2ï¼‰ï¼Œåœ¨æ¦‚å¿µä¸Šä½œä¸º TCP å¤´éƒ¨çš„å‰ç¼€ã€‚

The pseudo-header is 96 bits for IPv4 and 320 bits for IPv6.  
ä¼ªå¤´éƒ¨åœ¨ IPv4 ä¸‹æ˜¯ 96 ä½ï¼Œåœ¨ IPv6 ä¸‹æ˜¯ 320 ä½ã€‚

Including the pseudo-header in the checksum gives the TCP connection protection against misrouted segments.  
åœ¨æ ¡éªŒå’Œä¸­åŒ…å«ä¼ªæ ‡å¤´å¯ä»¥é¿å… TCP è¿æ¥é”™è¯¯è·¯ç”±çš„æ®µã€‚

This information is carried in IP headers and is transferred across the TCP/network interface in the arguments or results of calls by the TCP implementation on the IP layer.  
è¿™äº›ä¿¡æ¯åŒ…å«åœ¨ IP å¤´éƒ¨ä¸­ï¼Œå¹¶åœ¨ TCP/ç½‘ç»œ æ¥å£ä¸Šé€šè¿‡ TCP å¯¹ IP å±‚çš„è°ƒç”¨çš„å‚æ•°æˆ–ç»“æœè¿›è¡Œä¼ è¾“ã€‚

{{< /block-indent >}}

{{< center >}}

```
+--------+--------+--------+--------+
|           Source Address          |
+--------+--------+--------+--------+
|         Destination Address       |
+--------+--------+--------+--------+
|  zero  |  PTCL  |    TCP Length   |
+--------+--------+--------+--------+
```

Figure 2: IPv4 Pseudo-header  
å›¾ 2ï¼šIPv4 ä¼ªå¤´éƒ¨

{{< /center >}}

{{< block-indent >}}
Pseudo-header components for IPv4:  
IPv4 çš„ä¼ªå¤´ç»„æˆ:

Source Address: the IPv4 source address in network byte order  
Source Address: ç½‘ç»œå­—èŠ‚åºçš„ IPv4 æºåœ°å€

Destination Address: the IPv4 destination address in network byte order  
Destination Address: ç½‘ç»œå­—èŠ‚åºçš„ IPv4 ç›®çš„åœ°å€

zero: bits set to zero  
zero: å…¨éƒ¨è®¾ç½®ä¸º 0

PTCL: the protocol number from the IP header  
PTCL: æ¥è‡ª IP å¤´éƒ¨çš„åè®®å·

TCP Length: the TCP header length plus the data length in octets (this is not an explicitly transmitted quantity but is computed), and it does not count the 12 octets of the pseudo-header.
TCP Length: TCP æŠ¥å¤´åŠ ä¸Šæ•°æ®éƒ¨åˆ†çš„é•¿åº¦ï¼Œå•ä½æ˜¯å­—èŠ‚ï¼ˆè¿™ä¸æ˜¯ä¸€ä¸ªæ˜ç¡®çš„ä¼ è¾“é‡ï¼Œè€Œæ˜¯è®¡ç®—å‡ºæ¥çš„ï¼‰ï¼Œå¹¶ä¸”ä¸åŒ…æ‹¬ 12 å­—èŠ‚çš„ä¼ªå¤´éƒ¨ã€‚

For IPv6, the pseudo-header is defined in Section 8.1 of RFC 8200 [13] and contains the IPv6 Source Address and Destination Address, an Upper-Layer Packet Length (a 32-bit value otherwise equivalent to TCP Length in the IPv4 pseudo-header), three bytes of zero padding, and a Next Header value, which differs from the IPv6 header value if there are extension headers present between IPv6 and TCP.  
å¯¹äº IPv6ï¼Œä¼ªæ ‡å¤´åœ¨ RFC 8200 [13] çš„ç¬¬ 8.1 èŠ‚ä¸­å®šä¹‰ï¼ŒåŒ…å« IPv6 æºåœ°å€å’Œç›®æ ‡åœ°å€ã€ä¸Šå±‚æ•°æ®åŒ…é•¿åº¦ï¼ˆä¸€ä¸ª 32 ä½å€¼ï¼Œå¦åˆ™ç­‰åŒäº IPv4 ä¼ªæ ‡å¤´ä¸­çš„ TCP é•¿åº¦ï¼‰ headerï¼‰ï¼Œä¸‰ä¸ªå­—èŠ‚çš„é›¶å¡«å……å’Œä¸€ä¸ª Next Header å€¼ï¼Œå¦‚æœ IPv6 å’Œ TCP ä¹‹é—´å­˜åœ¨æ‰©å±•å¤´éƒ¨ï¼Œåˆ™è¯¥å€¼ä¸ IPv6 å¤´éƒ¨å€¼ä¸åŒã€‚

The TCP checksum is never optional. The sender MUST generate it (MUST-2) and the receiver MUST check it (MUST-3).  
TCP æ ¡éªŒå’Œæ°¸è¿œä¸æ˜¯å¯é€‰çš„ï¼Œå‘é€æ–¹å¿…é¡»ç”Ÿæˆå®ƒï¼ˆMUST-2ï¼‰å¹¶ä¸”æ¥æ”¶æ–¹å¿…é¡»æ£€æŸ¥å®ƒï¼ˆMUST-3ï¼‰ã€‚

{{< /block-indent >}}

**Urgent Pointer**: 16 bits  
{{< block-indent >}}
This field communicates the current value of the urgent pointer as a positive offset from the sequence number in this segment.  
è¿™ä¸ªå­—æ®µè¡¨ç¤ºå½“å‰ç´§æ€¥æŒ‡é’ˆè·ç¦»æœ¬æ®µä¸­åºåˆ—å·çš„æ­£åç§»ã€‚

The urgent pointer points to the sequence number of the octet following the urgent data.  
ç´§æ€¥æŒ‡é’ˆæŒ‡å‘ç´§æ€¥æ•°æ®åçš„å­—èŠ‚çš„åºåˆ—å·ã€‚

This field should only be interpreted in segments with the URG control bit set.  
è¿™ä¸ªå­—æ®µåªåº”åœ¨è®¾ç½®äº† URG æ ‡å¿—çš„ TCP æ®µä¸­ä½¿ç”¨ã€‚
{{< /block-indent >}}

**Options**:  
{{< block-indent >}}
[TCP Option]; size(Options) == (DOffset-5)\*32; present only when DOffset > 5.  
[TCP Option]; size(Options) == (DOffset-5)\*32; åªæœ‰åœ¨ DOffset > 5 æ—¶å­˜åœ¨.

Note that this size expression also includes any padding trailing the actual options present.  
æ³¨æ„ï¼Œè¿™ä¸ªå¤§å°è¡¨è¾¾å¼è¿˜åŒ…æ‹¬åœ¨å®é™…é€‰é¡¹åé¢çš„ä»»ä½•å¡«å……ã€‚

Options may occupy space at the end of the TCP header and are a multiple of 8 bits in length.  
é€‰é¡¹éƒ¨åˆ†å¯èƒ½å ç”¨ TCP å¤´çš„æœ«å°¾çš„ç©ºé—´ï¼Œé•¿åº¦ä¸º 8bit çš„å€æ•°ã€‚

All options are included in the checksum.  
é€‰é¡¹éƒ¨åˆ†ä¹ŸåŒ…æ‹¬åœ¨æ£€éªŒå’Œçš„è®¡ç®—ä¸­ã€‚

An option may begin on any octet boundary.  
é€‰é¡¹éƒ¨åˆ†å¯ä»¥ä»ä»»ä½•å­—èŠ‚è¾¹ç•Œä¸Šå¼€å§‹ã€‚

There are two cases for the format of an option:  
é€‰é¡¹çš„æ ¼å¼æœ‰ä¸¤ç§æƒ…å†µï¼š

- Case 1: A single octet of option-kind.  
  æƒ…å†µ 1: ä¸€ä¸ªå­—èŠ‚çš„é€‰é¡¹ç±»å‹ã€‚
- Case 2: An octet of option-kind (Kind), an octet of option-length, and the actual option-data octets.  
  æƒ…å†µ 2: ä¸€ä¸ªå­—èŠ‚çš„é€‰é¡¹ç±»å‹(Kind)ã€ä¸€ä¸ªå­—èŠ‚çš„é€‰é¡¹é•¿åº¦å’ŒçœŸæ­£é€‰é¡¹æ•°æ®ã€‚

The option-length counts the two octets of option-kind and option-length as well as the option-data octets.  
é€‰é¡¹é•¿åº¦åŒ…æ‹¬é€‰é¡¹ç§ç±»å’Œé€‰é¡¹é•¿åº¦çš„ä¸¤ä¸ªå­—èŠ‚ï¼Œä»¥åŠé€‰é¡¹æ•°æ®çš„å­—èŠ‚æ•°ã€‚

Note that the list of options may be shorter than the Data Offset field might imply.  
æ³¨æ„ï¼šé€‰é¡¹åˆ—è¡¨å¯èƒ½æ¯”æ•°æ®åç§»å­—æ®µè¦çŸ­ã€‚

The content of the header beyond the End of Option List Option MUST be header padding of zeros (MUST-69).  
é€‰é¡¹åˆ—è¡¨é€‰é¡¹ç»“æŸåçš„å¤´éƒ¨å†…å®¹å¿…é¡»ç”¨é›¶å¡«å……ï¼ˆMUST-69ï¼‰ã€‚

The list of all currently defined options is managed by IANA [62], and each option is defined in other RFCs, as indicated there.  
æ‰€æœ‰å½“å‰å®šä¹‰çš„é€‰é¡¹åˆ—è¡¨ç”± IANA [62] ç®¡ç†ï¼Œæ¯ä¸ªé€‰é¡¹éƒ½åœ¨å…¶ä»– RFC ä¸­å®šä¹‰ï¼Œå¦‚æ­¤å¤„æ‰€ç¤ºã€‚

That set includes experimental options that can be extended to support multiple concurrent usages [45].  
è¯¥åˆ—è¡¨åŒ…æ‹¬å¯ä»¥æ‰©å±•ä»¥æ”¯æŒå¤šä¸ªå¹¶å‘ä½¿ç”¨çš„å®éªŒé€‰é¡¹ [45]ã€‚

A given TCP implementation can support any currently defined options, but the following options MUST be supported (MUST-4 -- note Maximum Segment Size Option support is also part of MUST-14 in Section 3.7.1):  
ç»™å®šçš„ TCP å®ç°å¯ä»¥æ”¯æŒä»»ä½•å½“å‰å®šä¹‰çš„é€‰é¡¹ï¼Œä½†å¿…é¡»æ”¯æŒä»¥ä¸‹é€‰é¡¹ï¼ˆMUST-4 â€”â€” æ³¨æ„æœ€å¤§æ®µå¤§å°é€‰é¡¹æ”¯æŒä¹Ÿæ˜¯ç¬¬ 3.7.1 èŠ‚ä¸­ MUST-14 çš„ä¸€éƒ¨åˆ†ï¼‰ï¼š

{{< /block-indent >}}
{{< center >}}

```
+======+========+============================+
| Kind | Length | Meaning                    |
+======+========+============================+
| 0    | -      | End of Option List Option. |
+------+--------+----------------------------+
| 1    | -      | No-Operation.              |
+------+--------+----------------------------+
| 2    | 4      | Maximum Segment Size.      |
+------+--------+----------------------------+
```

Table 1: Mandatory Option Set
{{< /center >}}

{{< block-indent >}}
These options are specified in detail in Section 3.2.  
è¿™äº›é€‰é¡¹åœ¨ç¬¬ 3.2 èŠ‚ä¸­æœ‰è¯¦ç»†è¯´æ˜ã€‚

A TCP implementation MUST be able to receive a TCP Option in any segment (MUST-5).  
TCP å®ç°å¿…é¡»èƒ½å¤Ÿåœ¨ä»»ä½•æ®µä¸­æ¥æ”¶ TCP é€‰é¡¹ï¼ˆMUST-5ï¼‰ã€‚

A TCP implementation MUST (MUST-6) ignore without error any TCP Option it does not implement, assuming that the option has a length field.  
TCP å®ç°å¿…é¡»ï¼ˆMUST-6ï¼‰æ— è¯¯åœ°å¿½ç•¥å®ƒæ²¡æœ‰å®ç°çš„ä»»ä½• TCP é€‰é¡¹ï¼Œå‡è®¾è¯¥é€‰é¡¹æœ‰ä¸€ä¸ªé•¿åº¦å­—æ®µã€‚

All TCP Options except End of Option List Option (EOL) and No-Operation (NOP) MUST have length fields, including all future options (MUST-68).  
é™¤äº†é€‰é¡¹åˆ—è¡¨ç»“æŸé€‰é¡¹ï¼ˆEOLï¼‰å’Œæ— æ“ä½œï¼ˆNOPï¼‰ä¹‹å¤–çš„æ‰€æœ‰ TCP é€‰é¡¹å¿…é¡»æœ‰é•¿åº¦å­—æ®µï¼ŒåŒ…æ‹¬æ‰€æœ‰æœªæ¥é€‰é¡¹ï¼ˆMUST-68ï¼‰ã€‚

TCP implementations MUST be prepared to handle an illegal option length (e.g., zero); a suggested procedure is to reset the connection and log the error cause (MUST-7).  
TCP å®ç°å¿…é¡»å‡†å¤‡å¥½å¤„ç†éæ³•é€‰é¡¹é•¿åº¦ï¼ˆä¾‹å¦‚ï¼Œ0ï¼‰ï¼Œå»ºè®®çš„å¤„ç†æ˜¯é‡ç½®è¿æ¥å¹¶è®°å½•é”™è¯¯åŸå›  (MUST-7)ã€‚

Note: There is ongoing work to extend the space available for TCP Options, such as [65].  
æ³¨æ„ï¼šç›®å‰æ­£åœ¨è¿›è¡Œæ‰©å±• TCP é€‰é¡¹å¯ç”¨ç©ºé—´çš„å·¥ä½œï¼Œä¾‹å¦‚ [65]ã€‚

{{< /block-indent >}}

**Data**: variable length

{{< block-indent >}}
User data carried by the TCP segment.  
TCP æ®µä¸­æºå¸¦çš„ç”¨æˆ·æ•°æ®ã€‚
{{< /block-indent >}}

### å…·ä½“çš„é€‰é¡¹å®šä¹‰

**3.2. Specific Option Definitions**

A TCP Option, in the mandatory option set, is one of an End of Option List Option, a No-Operation Option, or a Maximum Segment Size Option.
TCP é€‰é¡¹ï¼Œåœ¨å¼ºåˆ¶é€‰é¡¹åˆ—è¡¨ä¸­ï¼Œæ˜¯é€‰é¡¹åˆ—è¡¨ç»“æŸé€‰é¡¹ã€æ— æ“ä½œé€‰é¡¹æˆ–æœ€å¤§æ®µå¤§å°é€‰é¡¹ä¸­çš„ä¸€ä¸ªã€‚

An End of Option List Option is formatted as follows:  
é€‰é¡¹åˆ—è¡¨ç»“æŸé€‰é¡¹çš„æ ¼å¼å¦‚ä¸‹ï¼š

```
 0
 0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+
|       0       |
+-+-+-+-+-+-+-+-+
```

where:  
å…¶ä¸­ï¼š

Kind: 1 byte; Kind == 0.

This option code indicates the end of the option list.  
è¯¥é€‰é¡¹ä»£ç è¡¨ç¤ºé€‰é¡¹åˆ—è¡¨çš„ç»“å°¾ã€‚

This might not coincide with the end of the TCP header according to the Data Offset field.  
æ ¹æ®æ•°æ®åç§»å­—æ®µï¼Œè¿™å¯èƒ½ä¸ TCP å¤´éƒ¨çš„ç»“å°¾ä¸ä¸€è‡´ã€‚

This is used at the end of all options, not the end of each option, and need only be used if the end of the options would not otherwise coincide with the end of the TCP header.  
è¿™ç”¨äºæ‰€æœ‰é€‰é¡¹çš„æœ«å°¾ï¼Œè€Œä¸æ˜¯æ¯ä¸ªé€‰é¡¹çš„æœ«å°¾ï¼Œå¹¶ä¸”ä»…åœ¨é€‰é¡¹æœ«å°¾ä¸ TCP æ ‡å¤´æœ«å°¾ä¸ä¸€è‡´æ—¶æ‰éœ€è¦ä½¿ç”¨ã€‚

A No-Operation Option is formatted as follows:  
æ— æ“ä½œé€‰é¡¹çš„æ ¼å¼å¦‚ä¸‹ï¼š

```
 0
 0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+
|       1       |
+-+-+-+-+-+-+-+-+
```

where:  
å…¶ä¸­ï¼š

Kind: 1 byte; Kind == 1.

This option code can be used between options, for example, to align the beginning of a subsequent option on a word boundary.  
è¯¥é€‰é¡¹ä»£ç å¯ç”¨äºé€‰é¡¹ä¹‹é—´ï¼Œä¾‹å¦‚ï¼Œå°†åç»­é€‰é¡¹çš„å¼€å¤´å¯¹é½åˆ°å­—è¾¹ç•Œä¸Šã€‚

There is no guarantee that senders will use this option, so receivers MUST be prepared to process options even if they do not begin on a word boundary (MUST-64).  
ä¸èƒ½ä¿è¯å‘é€æ–¹ä¼šä½¿ç”¨è¿™ä¸ªé€‰é¡¹ï¼Œå› æ­¤æ¥æ”¶æ–¹å¿…é¡»å‡†å¤‡å¥½å¤„ç†é€‰é¡¹ï¼Œå³ä½¿å®ƒä»¬ä¸æ˜¯ä»å­—è¾¹ç•Œå¼€å§‹çš„ï¼ˆMUST-64ï¼‰ã€‚

A Maximum Segment Size Option is formatted as follows:  
æœ€å¤§æ®µå¤§å°é€‰é¡¹çš„æ ¼å¼å¦‚ä¸‹ï¼š

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       2       |     Length    |   Maximum Segment Size (MSS)  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

where:  
å…¶ä¸­ï¼š

Kind: 1 byte; Kind == 2.

If this option is present, then it communicates the maximum receive segment size at the TCP endpoint that sends this segment.  
å¦‚æœå­˜åœ¨æ­¤é€‰é¡¹ï¼Œåˆ™å®ƒä¼šåœ¨å‘é€æ­¤æ®µçš„ TCP ç«¯ä¼ è¾¾æœ€å¤§æ¥æ”¶æ®µå¤§å°ã€‚

This value is limited by the IP reassembly limit.  
è¯¥å€¼å— IP é‡ç»„é™åˆ¶ã€‚

This field may be sent in the initial connection request (i.e., in segments with the SYN control bit set) and MUST NOT be sent in other segments (MUST-65).  
è¯¥å­—æ®µå¯ä»¥åœ¨åˆå§‹è¿æ¥è¯·æ±‚ä¸­å‘é€ï¼ˆå³ï¼Œåœ¨è®¾ç½®äº† SYN æ§åˆ¶ä½çš„æ®µä¸­ï¼‰å¹¶ä¸”ä¸å¾—åœ¨å…¶ä»–æ®µä¸­å‘é€ï¼ˆMUST-65ï¼‰ã€‚

If this option is not used, any segment size is allowed.  
å¦‚æœä¸ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œåˆ™å…è®¸ä»»ä½•æ®µå¤§å°ã€‚

A more complete description of this option is provided in Section 3.7.1.  
ç¬¬ 3.7.1 èŠ‚æä¾›äº†æ­¤é€‰é¡¹çš„æ›´å®Œæ•´æè¿°ã€‚

Length: 1 byte; Length == 4.

Length of the option in bytes.  
é€‰é¡¹çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚

Maximum Segment Size (MSS): 2 bytes.

The maximum receive segment size at the TCP endpoint that sends this segment.  
å‘é€è¯¥æ®µçš„ TCP ç«¯çš„æœ€å¤§æ¥æ”¶æ®µå¤§å°ã€‚

#### å…¶ä»–å¸¸ç”¨é€‰é¡¹

**3.2.1. Other Common Options**

Additional RFCs define some other commonly used options that are recommended to implement for high performance but are not necessary for basic TCP interoperability.  
å…¶ä»– RFC å®šä¹‰äº†ä¸€äº›å…¶ä»–å»ºè®®ä¸ºå®ç°é«˜æ€§èƒ½è€Œå®ç°çš„å¸¸ç”¨é€‰é¡¹ï¼Œä½†å¯¹äºåŸºæœ¬ TCP äº’æ“ä½œæ€§è€Œè¨€ä¸æ˜¯å¿…éœ€çš„ã€‚

These are the TCP Selective Acknowledgment (SACK) Option [22] [26], TCP Timestamp (TS) Option [47], and TCP Window Scale (WS) Option [47].  
è¿™äº›æ˜¯ TCP é€‰æ‹©æ€§ç¡®è®¤ (SACK) é€‰é¡¹ [22] [26]ã€TCP æ—¶é—´æˆ³ (TS) é€‰é¡¹ [47] å’Œ TCP çª—å£æ¯”ä¾‹ (WS) é€‰é¡¹ [47]ã€‚

#### å®éªŒæ€§ TCP é€‰é¡¹

**3.2.2. Experimental TCP Options**

Experimental TCP Option values are defined in [30], and [45] describes the current recommended usage for these experimental values.  
å®éªŒæ€§ TCP é€‰é¡¹å€¼åœ¨ [30] ä¸­å®šä¹‰ï¼Œ[45] æè¿°äº†è¿™äº›å®éªŒå€¼çš„å½“å‰æ¨èç”¨æ³•ã€‚

### æœ¯è¯­æ¦‚è¿°

**3.3. TCP Terminology Overview**

This section includes an overview of key terms needed to understand the detailed protocol operation in the rest of the document.  
æœ¬èŠ‚æ¦‚è¿°äº†ç†è§£æ–‡æ¡£å…¶ä½™éƒ¨åˆ†è¯¦ç»†åè®®æ“ä½œæ‰€éœ€çš„å…³é”®æœ¯è¯­ã€‚

There is a glossary of terms in Section 4.  
ç¬¬ 4 èŠ‚ä¸­æœ‰æœ¯è¯­è¡¨ã€‚
