---
title: RFC9293 TCP 协议
weight: 3
draft: true
# bookFlatSection: false
# bookToc: true
# bookHidden: false
# bookCollapseSection: false
# bookComments: false
# bookSearchExclude: false
---

# RFC9293 TCP 协议中文翻译

这是 RFC 上最新（截止到 2023 年 3 月）完整描述了 TCP 协议标准的文档，它整合了 RFC793 提出的 TCP 规范以及后来提出的多项优化 ，如果对 RFC793 感兴趣可以参考[RFC793 TCP 协议中文翻译](../translations/rfc793)。

原文：[Transmission Control Protocol (TCP)](https://datatracker.ietf.org/doc/rfc9293/)

## 封面

Internet Engineering Task Force (IETF)  
STD: 7  
Request for Comments: 9293  
Obsoletes: 793, 879, 2873, 6093, 6429, 6528, 6691  
Updates: 1011, 1122, 5961  
Category: Standards Track  
ISSN: 2070-1721

{{< right >}}
W. Eddy, Ed.  
MTI Systems  
August 2022
{{< /right >}}

{{< center >}}
Transmission Control Protocol (TCP)  
传输控制协议（TCP）
{{< /center >}}

## 摘要

**Abstract**

This document specifies the Transmission Control Protocol (TCP).  
本文档规定了传输控制协议（TCP）。

TCP is an important transport-layer protocol in the Internet protocol stack, and it has continuously evolved over decades of use and growth of the Internet.  
TCP 是 Internet 协议栈中重要的传输层协议，在互联网数十年的使用和发展过程中不断改进。

Over this time, a number of changes have been made to TCP as it was specified in RFC 793, though these have only been documented in a piecemeal fashion.  
在这段时间里，已经对 RFC 793 中规定的 TCP 进行了一些修改，尽管这些修改只是以零散的方式被记录下来。

This document collects and brings those changes together with the protocol specification from RFC 793.  
本文件收集了这些变化，并将其与 RFC 793 的协议规范结合在一起。

This document obsoletes RFC 793, as well as RFCs 879, 2873, 6093, 6429, 6528, and 6691 that updated parts of RFC 793.  
本文档废弃了 RFC 793，以及更新了 RFC 793 部分内容的 RFC 879、2873、6093、6429、6528 和 6691。

It updates RFCs 1011 and 1122, and it should be considered as a replacement for the portions of those documents dealing with TCP requirements.  
它更新了 RFC 1011 和 1122，它可以被视为那些文档中涉及 TCP 要求的部分的替代品。

It also updates RFC 5961 by adding a small clarification in reset handling while in the SYN-RECEIVED state.  
它还更新了 RFC 5961，在 SYN-RECEIVED 状态下在重置处理中添加了一个小的说明。

The TCP header control bits from RFC 793 have also been updated based on RFC 3168.  
RFC 793 中的 TCP 头控制位也根据 RFC 3168 进行了更新。

**Status of This Memo**

This is an Internet Standards Track document.  
这是一份互联网标准追踪文件。

This document is a product of the Internet Engineering Task Force (IETF).  
本文档是 Internet 工程任务组 (IETF) 的产品。

It represents the consensus of the IETF community.  
它代表了 IETF 社区的共识。

It has received public review and has been approved for publication by the Internet Engineering Steering Group (IESG).  
它已经接受了公众审阅，并已被互联网工程指导小组 (IESG) 批准发布。

Further information on Internet Standards is available in Section 2 of RFC 7841.  
有关 Internet 标准的更多信息，请参阅 RFC 7841 的第 2 节。

Information about the current status of this document, any errata, and how to provide feedback on it may be obtained at https://www.rfc-editor.org/info/rfc9293.  
有关本文档的当前状态、任何勘误表以及如何提供反馈的信息，请访问 [🔗](https://www.rfc-editor.org/info/rfc9293)。

## 版权声明

**Copyright Notice**

Copyright (c) 2022 IETF Trust and the persons identified as the document authors.  
Copyright (c) 2022 IETF Trust 和被认定为本文档作者的人员。

All rights reserved.  
保留所有权利。

This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (https://trustee.ietf.org/license-info) in effect on the date of publication of this document.  
本文档受 BCP 78 和 IETF 信托与 IETF 文档相关的法律规定 [🔗](https://trustee.ietf.org/license-info) 的约束，这些条款在本文档发布之日生效。

Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  
请仔细阅读这些文件，因为它们描述了您对本文件的权利和限制。

Code Components extracted from this document must include Revised BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Revised BSD License.  
从本文件中提取的代码组件必须包括信托法律条款第 4.e 节中描述的修订版 BSD 许可文本，并且不提供修订版 BSD 许可中描述的保证。

This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  
本文档可能包含 2008 年 11 月 10 日之前发布或公开提供的 IETF 文档或 IETF 文稿中的材料。

The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process.  
控制本材料某些版权的人可能未授予 IETF 信托允许在 IETF 标准流程之外修改此类材料的权利。

Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.  
如果没有从控制此类材料的版权的人那里获得足够的许可，则不得在 IETF 标准流程之外修改本文档，并且不得在 IETF 标准流程之外创建其衍生作品，除非将其格式化为 RFC 出版或将其翻译成英语以外的其他语言。

## 目录

{{< center >}}
Table of Contents
{{< /center >}}

1.Purpose and Scope 目的和范围

2.Introduction 介绍  
&emsp;2.1. Requirements Language 需求语言  
&emsp;2.2. Key TCP Concepts 关键的 TCP 概念

3.Functional Specification 功能规范  
&emsp;3.1. Header Format 头部格式  
&emsp;3.2. Specific Option Definitions 具体选项定义  
&emsp;&emsp;3.2.1. Other Common Options 其他常用选项  
&emsp;&emsp;3.2.2. Experimental TCP Options 实验性 TCP 选项  
&emsp;3.3. TCP Terminology Overview TCP 术语概述  
&emsp;&emsp;3.3.1. Key Connection State Variables 关键连接状态变量  
&emsp;&emsp;3.3.2. State Machine Overview 状态机概述  
&emsp;3.4. Sequence Numbers 序列号  
&emsp;&emsp;3.4.1. Initial Sequence Number Selection 初始序列号选择  
&emsp;&emsp;3.4.2. Knowing When to Keep Quiet 知道什么时候该保持静默  
&emsp;&emsp;3.4.3. The TCP Quiet Time Concept TCP 静默时间概念  
&emsp;3.5. Establishing a Connection 建立连接  
&emsp;&emsp;3.5.1. Half-Open Connections and Other Anomalies 半开连接和其他异常  
&emsp;&emsp;3.5.2. Reset Generation 重置生成  
&emsp;&emsp;3.5.3. Reset Processing 重置处理  
&emsp;3.6. Closing a Connection 关闭连接  
&emsp;&emsp;3.6.1. Half-Closed Connections 半闭连接  
&emsp;3.7. Segmentation 分段  
&emsp;&emsp;3.7.1. Maximum Segment Size Option 最大段长度选项  
&emsp;&emsp;3.7.2. Path MTU Discovery 路径 MTU 发现  
&emsp;&emsp;3.7.3. Interfaces with Variable MTU Values 可变 MTU 值的接口  
&emsp;&emsp;3.7.4. Nagle Algorithm Nagle 算法  
&emsp;&emsp;3.7.5. IPv6 Jumbograms  
&emsp;3.8. Data Communication 数据通信  
&emsp;&emsp;3.8.1. Retransmission Timeout 重传超时  
&emsp;&emsp;3.8.2. TCP Congestion Control TCP 拥塞控制  
&emsp;&emsp;3.8.3. TCP Connection Failures TCP 连接故障  
&emsp;&emsp;3.8.4. TCP Keep-Alives  
&emsp;&emsp;3.8.5. The Communication of Urgent Information 紧急信息的通信  
&emsp;&emsp;3.8.6. Managing the Window 管理窗口  
&emsp;3.9. Interfaces 接口  
&emsp;&emsp;3.9.1. User/TCP Interface 用户/TCP 接口  
&emsp;&emsp;3.9.2. TCP/Lower-Level Interface TCP/下层协议接口  
&emsp;3.10. Event Processing 事件处理  
&emsp;&emsp;3.10.1. OPEN Call OPEN 调用  
&emsp;&emsp;3.10.2. SEND Call SEND 调用  
&emsp;&emsp;3.10.3. RECEIVE Call RECEIVE 调用  
&emsp;&emsp;3.10.4. CLOSE Call CLOSE 调用  
&emsp;&emsp;3.10.5. ABORT Call ABORT 调用  
&emsp;&emsp;3.10.6. STATUS Call STATUS 调用  
&emsp;&emsp;3.10.7. SEGMENT ARRIVES 收到段  
&emsp;&emsp;3.10.8. Timeouts 超时

4.Glossary 词汇表

5.Changes from RFC 793 与 RFC 793 相比的改动

6.IANA Considerations IANA 的注意事项

7.Security and Privacy Considerations 安全和隐私注意事项

8.References 参考文献  
&emsp;8.1. Normative References 规范性参考文献  
&emsp;8.2. Informative References 非规范性参考文献

Appendix A. Other Implementation Notes 其他实现说明  
&emsp;A.1. IP Security Compartment and Precedence IP 安全部分和优先级  
&emsp;&emsp;A.1.1. Precedence 优先级  
&emsp;&emsp;A.1.2. MLS Systems MLS 系统  
&emsp;A.2. Sequence Number Validation 序列号验证  
&emsp;A.3. Nagle Modification Nagle 修改  
&emsp;A.4. Low Watermark Settings 低水印设置

Appendix B. TCP Requirement Summary TCP 要求概述

Acknowledgments 致谢

Author's Address 作者的地址

## 目的和范围

**1.Purpose and Scope**

In 1981, RFC 793 [16] was released, documenting the Transmission Control Protocol (TCP) and replacing earlier published specifications for TCP.  
1981 年，RFC 793 [16] 发布，记录了传输控制协议 (TCP) 并取代了早期发布的 TCP 规范。

Since then, TCP has been widely implemented, and it has been used as a transport protocol for numerous applications on the Internet.  
从那时起，TCP 得到了广泛的应用，并被用作 Internet 上众多应用程序的传输协议。

For several decades, RFC 793 plus a number of other documents have combined to serve as the core specification for TCP [49].  
几十年来，RFC 793 加上许多其他文档已合并为 TCP 的核心规范[49]。

Over time, a number of errata have been filed against RFC 793.  
随着时间的流逝，已经针对 RFC 793 提出了许多勘误表。

There have also been deficiencies found and resolved in security, performance, and many other aspects.  
在安全、性能和其他许多方面也发现和解决了一些缺陷。

The number of enhancements has grown over time across many separate documents.  
随着时间的推移，改进的数量在许多独立的文件中不断增加。

These were never accumulated together into a comprehensive update to the base specification.  
这些改进还没有被整合到一起，整体更新基本规范。

The purpose of this document is to bring together all of the IETF Standards Track changes and other clarifications that have been made to the base TCP functional specification (RFC 793) and to unify them into an updated version of the specification.  
本文档的目的是将所有 IETF 标准轨道的修改和其他对基础 TCP 功能规范（RFC 793）的说明汇集在一起，并将它们统一到规范的更新版本中。

Some companion documents are referenced for important algorithms that are used by TCP (e.g., for congestion control) but have not been completely included in this document.  
但是一些用于 TCP 使用的重要算法（例如，用于拥塞控制）的相关文档，还没有完全包括在本文档中。

This is a conscious choice, as this base specification can be used with multiple additional algorithms that are developed and incorporated separately.  
这是一个有意识的选择，因为该基本规范可以与多种额外的算法一起使用，这些算法是单独开发和合并的。

This document focuses on the common basis that all TCP implementations must support in order to interoperate.  
本文档重点关注所有 TCP 实现必须支持的共同基础，以实现互操作。

Since some additional TCP features have become quite complicated themselves (e.g., advanced loss recovery and congestion control), future companion documents may attempt to similarly bring these together.  
因为一些额外的 TCP 功能本身已经变得相当复杂（例如，高级损失恢复和拥塞控制），未来的配套文档可能会试图类似地将这些功能集中起来。

In addition to the protocol specification that describes the TCP segment format, generation, and processing rules that are to be implemented in code, RFC 793 and other updates also contain informative and descriptive text for readers to understand aspects of the protocol design and operation.  
除了描述要在代码中实现的 TCP 段格式、生成和处理规则的协议规范外，RFC 793 和其他更新还包含信息和描述性内容，以便读者了解协议设计和运行的各个方面。

This document does not attempt to alter or update this informative text and is focused only on updating the normative protocol specification.  
本文件并不试图改变或更新这些信息性的内容，而只是专注于更新标准化的协议规范。

This document preserves references to the documentation containing the important explanations and rationale, where appropriate.  
本文档保留了对包含重要解释和基本原理的文档的引用。

This document is intended to be useful both in checking existing TCP implementations for conformance purposes, as well as in writing new implementations.  
该文档旨在帮助检查现有的 TCP 实现以及编写新实现。

## 介绍

**2.Introduction**

RFC 793 contains a discussion of the TCP design goals and provides examples of its operation, including examples of connection establishment, connection termination, and packet retransmission to repair losses.  
RFC 793 包含了对 TCP 设计目标的讨论，并提供了其操作的示例，包括建立连接、关闭连接以及弥补丢失的数据包重传。

This document describes the basic functionality expected in modern TCP implementations and replaces the protocol specification in RFC 793.  
本文档描述了现代 TCP 实现中预期的基本功能，并替换了 RFC 793 中的协议规范。

It does not replicate or attempt to update the introduction and philosophy content in Sections 1 and 2 of RFC 793.  
它不会复制或尝试更新 RFC 793 第 1 和 2 节中的简介和理念内容。

Other documents are referenced to provide explanations of the theory of operation, rationale, and detailed discussion of design decisions.  
还参考了其他文件，以提供对操作理论、原理的解释，以及对设计决策的详细讨论。

This document only focuses on the normative behavior of the protocol.  
本文档只关注协议的标准行为。

The "TCP Roadmap" [49] provides a more extensive guide to the RFCs that define TCP and describe various important algorithms.
"TCP 路线图" [49] 为定义 TCP 和描述各种重要算法的 RFC 提供了更广泛的指南。

The TCP Roadmap contains sections on strongly encouraged enhancements that improve performance and other aspects of TCP beyond the basic operation specified in this document.  
TCP 路线图包含强烈推荐的增强功能，这些增强功能可以提高 TCP 的性能和其他超出本文档中规定的基本操作的方面。

As one example, implementing congestion control (e.g., [8]) is a TCP requirement, but it is a complex topic on its own and not described in detail in this document, as there are many options and possibilities that do not impact basic interoperability.  
举个例子，实现拥塞控制（例如，[8]）是一项 TCP 要求，但它本身就是一个复杂的主题，并且在本文档中没有详细描述，因为有许多不会影响基本的互操作性的选项和可能性 .

Similarly, most TCP implementations today include the high-performance extensions in [47], but these are not strictly required or discussed in this document.  
类似地，今天的大多数 TCP 实现都包括 [47] 中的高性能扩展，但这些在本文档中并不是严格要求或讨论的。

Multipath considerations for TCP are also specified separately in [59].  
TCP 的多路径注意事项也在 [59] 中单独指定。

A list of changes from RFC 793 is contained in Section 5.  
与 RFC 793 相比的改动清单包含在第 5 节。

### 需求语言

**2.1. Requirements Language**

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 [3] [12] when, and only when, they appear in all capitals, as shown here.  
本文中的关键词 "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", 和 "OPTIONAL"，当且仅当它们以大写字母出现时，应按照 BCP 14 [3] [12] 中的描述进行解释，如这里所示。

Each use of RFC 2119 keywords in the document is individually labeled and referenced in Appendix B, which summarizes implementation requirements.  
文档中每次使用 RFC 2119 关键字都在附录 B 中单独标记和引用，附录 B 总结了实现要求。

Sentences using "MUST" are labeled as "MUST-X" with X being a numeric identifier enabling the requirement to be located easily when referenced from Appendix B.  
使用 "MUST" 的句子被标记为 "MUST-X"，X 是一个数字标识符，可以很容易地从附录 B 找到引用的要求。

Similarly, sentences using "SHOULD" are labeled with "SHLD-X", "MAY" with "MAY-X", and "RECOMMENDED" with "REC-X".  
同样地，使用 "SHOULD" 的句子被标记为 "SHLD-X"，"MAY" 被标记为 "MAY-X"，"RECOMMENDED" 被标记为 "REC-X"。

For the purposes of this labeling, "SHOULD NOT" and "MUST NOT" are labeled the same as "SHOULD" and "MUST" instances.  
出于此标签的目的，"SHOULD NOT" 和 "MUST NOT" 的标签与 "SHOULD" 和 "MUST" 实例的标签相同。

### 关键的 TCP 概念

**2.2. Key TCP Concepts**

TCP provides a reliable, in-order, byte-stream service to applications.  
TCP 为应用程序提供可靠、有序的字节流服务。

The application byte-stream is conveyed over the network via TCP segments, with each TCP segment sent as an Internet Protocol (IP) datagram.  
应用程序的字节流通过 TCP 段在网络上传输，每个 TCP 段作为互联网协议 (IP) 数据报发送。

TCP reliability consists of detecting packet losses (via sequence numbers) and errors (via per-segment checksums), as well as correction via retransmission.  
TCP 可靠性包括检测数据包丢失（通过序列号）和错误（通过段校验和），以及通过重传进行纠正。

TCP supports unicast delivery of data.  
TCP 支持单播传输数据。

There are anycast applications that can successfully use TCP without modifications, though there is some risk of instability due to changes of lower-layer forwarding behavior [46].  
有一些任播应用程序可以在不修改的情况下成功地使用 TCP，尽管由于下层转发行为的变化存在一些不稳定的风险 [46]。

TCP is connection oriented, though it does not inherently include a liveness detection capability.  
TCP 是面向连接的，尽管它本身并不包括活跃性检测功能。

Data flow is supported bidirectionally over TCP connections, though applications are free to send data only unidirectionally, if they so choose.  
通过 TCP 连接双向支持数据流，但如果应用程序愿意，它们可以自由地仅单向发送数据。

TCP uses port numbers to identify application services and to multiplex distinct flows between hosts.  
TCP 使用端口号来识别应用程序服务并在主机之间复用不同的流。

A more detailed description of TCP features compared to other transport protocols can be found in Section 3.1 of [52].  
与其他传输协议相比，TCP 功能的更详细描述可以在 [52] 的第 3.1 节中找到。

Further description of the motivations for developing TCP and its role in the Internet protocol stack can be found in Section 2 of [16] and earlier versions of the TCP specification.  
关于开发 TCP 的动机和它在互联网协议栈中的作用的更多描述，可以在[16]的第 2 节和早期版本的 TCP 规范中找到。

## 功能规范

**3.Functional Specification**

### 头部格式

**3.1. Header Format**

TCP segments are sent as internet datagrams.  
TCP 段作为网络数据报发送。

The Internet Protocol (IP) header carries several information fields, including the source and destination host addresses [1] [13].
网际互联协议 (IP) 报头携带多个信息字段，包括源和目标主机地址 [1] [13]。

A TCP header follows the IP headers, supplying information specific to TCP.  
TCP 头部跟在 IP 头部之后，提供特定于 TCP 的信息。

This division allows for the existence of host-level protocols other than TCP.  
这种划分允许存在除 TCP 之外的主机级协议。

In the early development of the Internet suite of protocols, the IP header fields had been a part of TCP.  
在 Internet 协议套件的早期开发中，IP 报头字段一直是 TCP 的一部分。

This document describes TCP, which uses TCP headers.  
本文档描述了使用 TCP 头部的 TCP。

A TCP header, followed by any user data in the segment, is formatted as follows, using the style from [66]:  
在段中，TCP 头部后面是任意用户数据，格式如下，使用 [66] 中的样式：

{{< center >}}

```
 0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          Source Port          |       Destination Port        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Sequence Number                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                    Acknowledgment Number                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  Data |       |C|E|U|A|P|R|S|F|                               |
   | Offset| Rsrvd |W|C|R|C|S|S|Y|I|            Window             |
   |       |       |R|E|G|K|H|T|N|N|                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Checksum            |         Urgent Pointer        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                           [Options]                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               :
   :                             Data                              :
   :                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

Note that one tick mark represents one bit position.  
注意：一个刻度线代表一个比特位。

Figure 1: TCP Header Format  
图 1：TCP 头部格式

{{< /center >}}

where:  
其中：

**Source Port**: 16 bits  
{{< block-indent >}}
The source port number.  
源端口号
{{< /block-indent >}}

**Destination Port**: 16 bits  
{{< block-indent >}}
The destination port number.  
目标端口号
{{< /block-indent >}}

**Sequence Number**: 32 bits  
{{< block-indent >}}
The sequence number of the first data octet in this segment (except when SYN is present).  
该段数据中第一个字节的序列号（有 SYN 标志除外）。  
If SYN is set, the sequence number is the initial sequence number (ISN) and the first data octet is ISN+1.  
如果设置了 SYN，则序列号是初始序列号 (ISN)，第一个字节数据是 ISN+1。
{{< /block-indent >}}

**Acknowledgment Number**: 32 bits
{{< block-indent >}}
If the ACK control bit is set, this field contains the value of the next sequence number the sender of the segment is expecting to receive. Once a connection is established, this is always sent.  
如果设置了 ACK 标志，这个字段表示发送者期望收到的下一个序列号的值。一旦建立了连接，一直会发送这个字段。
{{< /block-indent >}}

**Data Offset (DOffset)**: 4 bits  
{{< block-indent >}}  
The number of 32 bit words in the TCP Header. This indicates where the data begins. The TCP header (even one including options) is an integer multiple of 32 bits long.  
这个数表示 TCP 头部的长度有多少个 32 bit，表示真正数据开始的位置。TCP 头部（即使包括选项部分）的长度是 32 bit 的整数倍。
{{< /block-indent >}}

**Reserved (Rsrvd)**: 4 bits  
{{< block-indent >}}
A set of control bits reserved for future use. Must be zero in generated segments and must be ignored in received segments if the corresponding future features are not implemented by the sending or receiving host.  
为将来使用而保留的一组控制位。如果发送或接收主机未实现相应的未来功能，则在生成的段中必须为零，并且在接收的段中必须忽略。
{{< /block-indent >}}

**Control bits**:  
{{< block-indent >}}
The control bits are also known as "flags".  
控制位也称为 "标志"。

Assignment is managed by IANA from the "TCP Header Flags" registry [62].  
由 IANA 从 "TCP Header Flags" 注册表 [62] 中管理分配。

The currently assigned control bits are CWR, ECE, URG, ACK, PSH, RST, SYN, and FIN.  
目前分配的控制位是 CWR、ECE、URG、ACK、PSH、RST、SYN 和 FIN。

CWR: 1 bit

Congestion Window Reduced (see [6]).  
减少拥塞窗口（参见 [6]）。

ECE: 1 bit

ECN-Echo (see [6]).  
显式拥塞通知回应(参见 [6]).

URG: 1 bit

Urgent pointer field is significant.  
紧急指针字段很重要。

ACK: 1 bit

Acknowledgment field is significant.  
确认字段很重要。

PSH: 1 bit

Push function (see the Send Call description in Section 3.9.1).  
推送功能（参见第 3.9.1 节中的 Send 调用说明）。

RST: 1 bit

Reset the connection.  
重置连接。

SYN: 1 bit

Synchronize sequence numbers.  
同步序列号。

FIN: 1 bit

No more data from sender.  
发送者没有更多数据。

{{< /block-indent >}}

**Window**: 16 bits
{{< block-indent >}}
The number of data octets beginning with the one indicated in the acknowledgment field which the sender of this segment is willing to accept.  
从确认序号开始，发送方可以接收的字节数。

The value is shifted when the window scaling extension is used [47].  
当使用窗口缩放扩展时，该值会发生变化 [47]。

The window size MUST be treated as an unsigned number, or else large window sizes will appear like negative windows and TCP will not work (MUST-1).  
窗口大小必须被视为无符号的数字，否则大的窗口大小将出现负窗口，TCP 将无法工作（MUST-1）。

It is RECOMMENDED that implementations will reserve 32-bit fields for the send and receive window sizes in the connection record and do all window computations with 32 bits (REC-1).  
建议实现在连接记录中为发送和接收窗口大小保留 32 位字段，并以 32 位进行所有窗口计算（REC-1）。
{{< /block-indent >}}

**Checksum**: 16 bits  
{{< block-indent >}}
The checksum field is the 16 bit one's complement of the one's complement sum of all 16 bit words in the header and text.  
检验和是头部和数据部分所有分割成 16 bit 数的经过二进制反码求和得到的数。

The checksum computation needs to ensure the 16-bit alignment of the data being summed.  
校验和计算需要确保求和的数据 16 位对齐。

If a segment contains an odd number of header and text octets, alignment can be achieved by padding the last octet with zeros on its right to form a 16-bit word for checksum purposes.  
如果段的头部和内容是奇数个字节，可以通过在最后一个字节的右侧填充零来对齐，以组成一个 16 位字来实现校验和。

The pad is not transmitted as part of the segment.  
填充不会作为 TCP 段的一部分进行传输。

While computing the checksum, the checksum field itself is replaced with zeros.  
在计算校验和时，校验和字段本身用零替换。

The checksum also covers a pseudo-header (Figure 2) conceptually prefixed to the TCP header.  
校验和还包括了一个伪头部（图 2），在概念上作为 TCP 头部的前缀。

The pseudo-header is 96 bits for IPv4 and 320 bits for IPv6.  
伪头部在 IPv4 下是 96 位，在 IPv6 下是 320 位。

Including the pseudo-header in the checksum gives the TCP connection protection against misrouted segments.  
在校验和中包含伪标头可以避免 TCP 连接错误路由的段。

This information is carried in IP headers and is transferred across the TCP/network interface in the arguments or results of calls by the TCP implementation on the IP layer.  
这些信息包含在 IP 头部中，并在 TCP/网络 接口上通过 TCP 对 IP 层的调用的参数或结果进行传输。

{{< /block-indent >}}

{{< center >}}

```
+--------+--------+--------+--------+
|           Source Address          |
+--------+--------+--------+--------+
|         Destination Address       |
+--------+--------+--------+--------+
|  zero  |  PTCL  |    TCP Length   |
+--------+--------+--------+--------+
```

Figure 2: IPv4 Pseudo-header  
图 2：IPv4 伪头部

{{< /center >}}

{{< block-indent >}}
Pseudo-header components for IPv4:  
IPv4 的伪头组成:

Source Address: the IPv4 source address in network byte order  
Source Address: 网络字节序的 IPv4 源地址

Destination Address: the IPv4 destination address in network byte order  
Destination Address: 网络字节序的 IPv4 目的地址

zero: bits set to zero  
zero: 全部设置为 0

PTCL: the protocol number from the IP header  
PTCL: 来自 IP 头部的协议号

TCP Length: the TCP header length plus the data length in octets (this is not an explicitly transmitted quantity but is computed), and it does not count the 12 octets of the pseudo-header.
TCP Length: TCP 报头加上数据部分的长度，单位是字节（这不是一个明确的传输量，而是计算出来的），并且不包括 12 字节的伪头部。

For IPv6, the pseudo-header is defined in Section 8.1 of RFC 8200 [13] and contains the IPv6 Source Address and Destination Address, an Upper-Layer Packet Length (a 32-bit value otherwise equivalent to TCP Length in the IPv4 pseudo-header), three bytes of zero padding, and a Next Header value, which differs from the IPv6 header value if there are extension headers present between IPv6 and TCP.  
对于 IPv6，伪标头在 RFC 8200 [13] 的第 8.1 节中定义，包含 IPv6 源地址和目标地址、上层数据包长度（一个 32 位值，否则等同于 IPv4 伪标头中的 TCP 长度） header），三个字节的零填充和一个 Next Header 值，如果 IPv6 和 TCP 之间存在扩展头部，则该值与 IPv6 头部值不同。

The TCP checksum is never optional. The sender MUST generate it (MUST-2) and the receiver MUST check it (MUST-3).  
TCP 校验和永远不是可选的，发送方必须生成它（MUST-2）并且接收方必须检查它（MUST-3）。

{{< /block-indent >}}

**Urgent Pointer**: 16 bits  
{{< block-indent >}}
This field communicates the current value of the urgent pointer as a positive offset from the sequence number in this segment.  
这个字段表示当前紧急指针距离本段中序列号的正偏移。

The urgent pointer points to the sequence number of the octet following the urgent data.  
紧急指针指向紧急数据后的字节的序列号。

This field should only be interpreted in segments with the URG control bit set.  
这个字段只应在设置了 URG 标志的 TCP 段中使用。
{{< /block-indent >}}

**Options**:  
{{< block-indent >}}
[TCP Option]; size(Options) == (DOffset-5)\*32; present only when DOffset > 5.  
[TCP Option]; size(Options) == (DOffset-5)\*32; 只有在 DOffset > 5 时存在.

Note that this size expression also includes any padding trailing the actual options present.  
注意，这个大小表达式还包括在实际选项后面的任何填充。

Options may occupy space at the end of the TCP header and are a multiple of 8 bits in length.  
选项部分可能占用 TCP 头的末尾的空间，长度为 8bit 的倍数。

All options are included in the checksum.  
选项部分也包括在检验和的计算中。

An option may begin on any octet boundary.  
选项部分可以从任何字节边界上开始。

There are two cases for the format of an option:  
选项的格式有两种情况：

- Case 1: A single octet of option-kind.  
  情况 1: 一个字节的选项类型。
- Case 2: An octet of option-kind (Kind), an octet of option-length, and the actual option-data octets.  
  情况 2: 一个字节的选项类型(Kind)、一个字节的选项长度和真正选项数据。

The option-length counts the two octets of option-kind and option-length as well as the option-data octets.  
选项长度包括选项种类和选项长度的两个字节，以及选项数据的字节数。

Note that the list of options may be shorter than the Data Offset field might imply.  
注意：选项列表可能比数据偏移字段要短。

The content of the header beyond the End of Option List Option MUST be header padding of zeros (MUST-69).  
选项列表选项结束后的头部内容必须用零填充（MUST-69）。

The list of all currently defined options is managed by IANA [62], and each option is defined in other RFCs, as indicated there.  
所有当前定义的选项列表由 IANA [62] 管理，每个选项都在其他 RFC 中定义，如此处所示。

That set includes experimental options that can be extended to support multiple concurrent usages [45].  
该列表包括可以扩展以支持多个并发使用的实验选项 [45]。

A given TCP implementation can support any currently defined options, but the following options MUST be supported (MUST-4 -- note Maximum Segment Size Option support is also part of MUST-14 in Section 3.7.1):  
给定的 TCP 实现可以支持任何当前定义的选项，但必须支持以下选项（MUST-4 —— 注意最大段大小选项支持也是第 3.7.1 节中 MUST-14 的一部分）：

{{< /block-indent >}}
{{< center >}}

```
+======+========+============================+
| Kind | Length | Meaning                    |
+======+========+============================+
| 0    | -      | End of Option List Option. |
+------+--------+----------------------------+
| 1    | -      | No-Operation.              |
+------+--------+----------------------------+
| 2    | 4      | Maximum Segment Size.      |
+------+--------+----------------------------+
```

Table 1: Mandatory Option Set
{{< /center >}}

{{< block-indent >}}
These options are specified in detail in Section 3.2.  
这些选项在第 3.2 节中有详细说明。

A TCP implementation MUST be able to receive a TCP Option in any segment (MUST-5).  
TCP 实现必须能够在任何段中接收 TCP 选项（MUST-5）。

A TCP implementation MUST (MUST-6) ignore without error any TCP Option it does not implement, assuming that the option has a length field.  
TCP 实现必须（MUST-6）无误地忽略它没有实现的任何 TCP 选项，假设该选项有一个长度字段。

All TCP Options except End of Option List Option (EOL) and No-Operation (NOP) MUST have length fields, including all future options (MUST-68).  
除了选项列表结束选项（EOL）和无操作（NOP）之外的所有 TCP 选项必须有长度字段，包括所有未来选项（MUST-68）。

TCP implementations MUST be prepared to handle an illegal option length (e.g., zero); a suggested procedure is to reset the connection and log the error cause (MUST-7).  
TCP 实现必须准备好处理非法选项长度（例如，0），建议的处理是重置连接并记录错误原因 (MUST-7)。

Note: There is ongoing work to extend the space available for TCP Options, such as [65].  
注意：目前正在进行扩展 TCP 选项可用空间的工作，例如 [65]。

{{< /block-indent >}}

**Data**: variable length

{{< block-indent >}}
User data carried by the TCP segment.  
TCP 段中携带的用户数据。
{{< /block-indent >}}

### 具体的选项定义

**3.2. Specific Option Definitions**

A TCP Option, in the mandatory option set, is one of an End of Option List Option, a No-Operation Option, or a Maximum Segment Size Option.
TCP 选项，在强制选项列表中，是选项列表结束选项、无操作选项或最大段大小选项中的一个。

An End of Option List Option is formatted as follows:  
选项列表结束选项的格式如下：

```
 0
 0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+
|       0       |
+-+-+-+-+-+-+-+-+
```

where:  
其中：

Kind: 1 byte; Kind == 0.

This option code indicates the end of the option list.  
该选项代码表示选项列表的结尾。

This might not coincide with the end of the TCP header according to the Data Offset field.  
根据数据偏移字段，这可能与 TCP 头部的结尾不一致。

This is used at the end of all options, not the end of each option, and need only be used if the end of the options would not otherwise coincide with the end of the TCP header.  
这用于所有选项的末尾，而不是每个选项的末尾，并且仅在选项末尾与 TCP 标头末尾不一致时才需要使用。

A No-Operation Option is formatted as follows:  
无操作选项的格式如下：

```
 0
 0 1 2 3 4 5 6 7
+-+-+-+-+-+-+-+-+
|       1       |
+-+-+-+-+-+-+-+-+
```

where:  
其中：

Kind: 1 byte; Kind == 1.

This option code can be used between options, for example, to align the beginning of a subsequent option on a word boundary.  
该选项代码可用于选项之间，例如，将后续选项的开头对齐到字边界上。

There is no guarantee that senders will use this option, so receivers MUST be prepared to process options even if they do not begin on a word boundary (MUST-64).  
不能保证发送方会使用这个选项，因此接收方必须准备好处理选项，即使它们不是从字边界开始的（MUST-64）。

A Maximum Segment Size Option is formatted as follows:  
最大段大小选项的格式如下：

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       2       |     Length    |   Maximum Segment Size (MSS)  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
```

where:  
其中：

Kind: 1 byte; Kind == 2.

If this option is present, then it communicates the maximum receive segment size at the TCP endpoint that sends this segment.  
如果存在此选项，则它会在发送此段的 TCP 端传达最大接收段大小。

This value is limited by the IP reassembly limit.  
该值受 IP 重组限制。

This field may be sent in the initial connection request (i.e., in segments with the SYN control bit set) and MUST NOT be sent in other segments (MUST-65).  
该字段可以在初始连接请求中发送（即，在设置了 SYN 控制位的段中）并且不得在其他段中发送（MUST-65）。

If this option is not used, any segment size is allowed.  
如果不使用此选项，则允许任何段大小。

A more complete description of this option is provided in Section 3.7.1.  
第 3.7.1 节提供了此选项的更完整描述。

Length: 1 byte; Length == 4.

Length of the option in bytes.  
选项的长度（以字节为单位）。

Maximum Segment Size (MSS): 2 bytes.

The maximum receive segment size at the TCP endpoint that sends this segment.  
发送该段的 TCP 端的最大接收段大小。

#### 其他常用选项

**3.2.1. Other Common Options**

Additional RFCs define some other commonly used options that are recommended to implement for high performance but are not necessary for basic TCP interoperability.  
其他 RFC 定义了一些其他建议为实现高性能而实现的常用选项，但对于基本 TCP 互操作性而言不是必需的。

These are the TCP Selective Acknowledgment (SACK) Option [22] [26], TCP Timestamp (TS) Option [47], and TCP Window Scale (WS) Option [47].  
这些是 TCP 选择性确认 (SACK) 选项 [22] [26]、TCP 时间戳 (TS) 选项 [47] 和 TCP 窗口比例 (WS) 选项 [47]。

#### 实验性 TCP 选项

**3.2.2. Experimental TCP Options**

Experimental TCP Option values are defined in [30], and [45] describes the current recommended usage for these experimental values.  
实验性 TCP 选项值在 [30] 中定义，[45] 描述了这些实验值的当前推荐用法。

### 术语概述

**3.3. TCP Terminology Overview**

This section includes an overview of key terms needed to understand the detailed protocol operation in the rest of the document.  
本节概述了理解文档其余部分详细协议操作所需的关键术语。

There is a glossary of terms in Section 4.  
第 4 节中有术语表。
